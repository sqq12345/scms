/*! author：陈成 */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.openTable=t.backgroundImg=t.openRefund=t.openModifyAdd=t.openYunDan=t.imgADD=t.uuid=t.putExtra=t.uploadConfig=t.config=t.act=t.requestUrl=void 0;var n=a(2),l={mainUrl:"https://api.shichamaishou.com/",codeurl:"https://api.shichamaishou.com/application/libraries/verification.php",token:"",type:""},o={login_validate:"purchase_login",token_validate:"token_validate",bcProduct_addProduct:"bcProduct_addProduct",bcCategory_getDropList:"bcCategory_getDropList",bcBrand_bcGetList:"bcBrand_bcGetList",bcCategory_getList:"bcCategory_getList",bcCategory_updateStatus:"bcCategory_updateStatus",bcCategory_getParentList:"bcCategory_getParentList",bcCategory_add:"bcCategory_add",bcCategory_getInfo:"bcCategory_getInfo",bcCategory_update:"bcCategory_update",bcTemplate_getList:"bcTemplate_getList",bcTemplate_add:"bcTemplate_add",bcTemplate_updateStatus:"bcTemplate_updateStatus",bcTemplate_update:"bcTemplate_update",bcTemplate_getAllList:"bcTemplate_getAllList",bcProduct_addSku:"bcProduct_addSku",bcProduct_getList:"bcProduct_getList",bcProduct_updateStatus:"bcProduct_updateStatus",bcBespeakCategory_getList:"bcBespeakCategory_getList",bcBespeakCategory_updateStatus:"bcBespeakCategory_updateStatus",bcBespeakCategory_getParentList:"bcBespeakCategory_getParentList",bcBespeakCategory_getInfo:"bcBespeakCategory_getInfo",bcBespeakCategory_update:"bcBespeakCategory_update",bcBespeakCategory_add:"bcBespeakCategory_add",bcProduct_getInfo:"bcProduct_getInfo",bcBrand_add:"bcBrand_add",bcBrand_getList:"bcBrand_getList",bcBrand_updateStatus:"bcBrand_updateStatus",bcBrand_update:"bcBrand_update",bcBrand_getInfo:"bcBrand_getInfo",bcBanner_getList:"bcBanner_getList",bcBanner_updateStatus:"bcBanner_updateStatus",bcBanner_add:"bcBanner_add",bcBanner_update:"bcBanner_update",bcPurchase_getList:"bcPurchase_getList",bcPurchase_add:"bcPurchase_add",bcPurchase_update:"bcPurchase_update",bcCustomer_getList:"bcCustomer_getList",bcPurchase_updateStatus:"bcPurchase_updateStatus",bcCustomer_getInfo:"bcCustomer_getInfo",bcCustomer_updateStatus:"bcCustomer_updateStatus",address_getAreasByCity:"address_getAreasByCity",address_getCitiesByProvince:"address_getCitiesByProvince",address_getProvinces:"address_getProvinces",bcCustomer_update:"bcCustomer_update",bcAddress_update:"bcAddress_update",reBcProduct_addProduct:"reBcProduct_addProduct",bcCategory_getAllList:"bcCategory_getAllList",reBcProduct_getList:"reBcProduct_getList",reBcProduct_updateStatus:"reBcProduct_updateStatus",reBcProduct_addSku:"reBcProduct_addSku",reBcProduct_getInfo:"reBcProduct_getInfo",reBcProduct_updateProduct:"reBcProduct_updateProduct",reBcProduct_updateSku:"reBcProduct_updateSku",reBcProductSku_updateStatus:"reBcProductSku_updateStatus",reBcBespeakProduct_addProduct:"reBcBespeakProduct_addProduct",bcBespeakCategory_getAllList:"bcBespeakCategory_getAllList",reBcBespeakProduct_getList:"reBcBespeakProduct_getList",reBcBespeakProduct_updateStatus:"reBcBespeakProduct_updateStatus",reBcBespeakProductSku_updateStatus:"reBcBespeakProductSku_updateStatus",reBcBespeakProduct_addSku:"reBcBespeakProduct_addSku",reBcBespeakProduct_getInfo:"reBcBespeakProduct_getInfo",reBcBespeakProduct_updateProduct:"reBcBespeakProduct_updateProduct",reBcBespeakProduct_updateSku:"reBcBespeakProduct_updateSku",reBcSpecialProduct_getList:"reBcSpecialProduct_getList",reBcSpecialProduct_getProductList:"reBcSpecialProduct_getProductList",reBcSpecialProduct_getSkuList:"reBcSpecialProduct_getSkuList",reBcSpecialProduct_add:"reBcSpecialProduct_add",reBcSpecialProduct_getInfo:"reBcSpecialProduct_getInfo",reBcSpecialProduct_update:"reBcSpecialProduct_update",reConfig_getInfo:"reConfig_getInfo",reConfig_doSubmit:"reConfig_doSubmit",upload_upload:"upload_upload",bcOrder_getList:"bcOrder_getList",bcOrder_cancel:"bcOrder_cancel",bcOrder_getInfo:"bcOrder_getInfo",company_getList:"company_getList",bcOrder_batchDelivery:"bcOrder_batchDelivery",bcOrder_updateAddress:"bcOrder_updateAddress",bcBespeakOrder_getList:"bcBespeakOrder_getList",bcBespeakOrder_cancel:"bcBespeakOrder_cancel",bcBespeakOrder_getInfo:"bcBespeakOrder_getInfo",bcBespeakOrder_batchDelivery:"bcBespeakOrder_batchDelivery",bcBespeakOrder_updateAddress:"bcBespeakOrder_updateAddress",bcBespeakOrder_replaceOrder:"bcBespeakOrder_replaceOrder",bcBespeakOrder_takingOrder:"bcBespeakOrder_takingOrder",bcBespeakOrder_confirm:"bcBespeakOrder_confirm",bcBespeakOrder_confirmNoGoods:"bcBespeakOrder_confirmNoGoods",bcRefundOrder_getList:"bcRefundOrder_getList",bcRefundOrder_getInfo:"bcRefundOrder_getInfo",bcRefundOrder_reject:"bcRefundOrder_reject",bcRefundOrder_validate:"bcRefundOrder_validate",bcBespeakOrder_getAssignOrderInfo:"bcBespeakOrder_getAssignOrderInfo",bcBespeakOrder_assign:"bcBespeakOrder_assign",bcOrder_refund:"bcOrder_refund",bcBespeakOrder_refund:"bcBespeakOrder_refund",uploadExcel_process:"uploadExcel_process",reBcProduct_validateSkuRef:"reBcProduct_validateSkuRef",bcBespeakOrder_getDelivery:"bcBespeakOrder_getDelivery",bcOrder_getDelivery:"bcOrder_getDelivery",uploadExcel_updateStock:"uploadExcel_updateStock",bcSplitOrder_getList:"bcSplitOrder_getList",bcSplitOrder_delivery:"bcSplitOrder_delivery",bcSplitOrder_getDelivery:"bcSplitOrder_getDelivery",reConfig_getRegionList:"reConfig_getRegionList"};o.reConfig_getRegionList="reConfig_getRegionList",o.bcSplitOrder_getInfo="bcSplitOrder_getInfo";var r=void 0,d={postage:"postage"},s={useCdnDomain:!1,region:i.region.z0};t.requestUrl=l,t.act=o,t.config=d,t.uploadConfig=s,t.putExtra={params:{},mimeType:["image/gif","image/jpeg","image/jpg","image/png"]},t.uuid=function(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var a=e.join("");return a},t.imgADD={add:"http://upload.hljr.com.cn/",productImg:"",bannerImg:"",brandImg:"",idcard:""},t.openYunDan=function(t){r||(0,n.echo)().data({act:o.company_getList}).loading().succ(function(e){e&&(r=e)}).async(),layer.open({type:1,area:["600px","600px"],content:'<div class="layui-form" style="margin-top: 20px"  lay-filter="yundan-form" id="yundan-form">\n               <div class="layui-form-item">\n              <label  class="layui-form-label label-w120">运输公司</label>\n               <div class="layui-input-block" >\n                  '+function(e){var t="";for(var a in e)t+='<input type="radio" name="wuliu" value='+e[a].code+' title="'+e[a].name+'" class="yundan-com">';return t}(r)+'\n    \n\n      \n        </div>\n        </div>\n        <div class="layui-form-item" >\n              <label  class="layui-form-label label-w120">运单号</label>\n               <div class="layui-input-inline" style="width: 250px">\n                <input  type="text" id="yundan-no" placeholder="请输入运单号"  class="layui-input" >\n        </div>\n    </div>\n    <div class="padding15">\n    <ul class="layui-timeline yundan-info">\n    \n   '+(t.splitOrderSn||t.orderSn?' <li class="layui-timeline-item">\n    <i class="layui-icon layui-timeline-axis">&#xe63f;</i>\n    <div class="layui-timeline-content layui-text">\n      <p>\n      获取物流信息中\n      </p>\n    </div>\n  </li>':"")+"\n \n\n</ul>\n</div>\n</div>",btn:["确定","取消"],closeBtn:0,title:"运单信息",yes:function(a,i){var n=e("#yundan-form .layui-form-radioed").prev().val();if(!n)return e.tips("请选择物流公司",4),!1;var l=e("#yundan-no").val();if(!l)return e.tips("请输入运单号",4),!1;t.succ(n,l),layer.close(a)},btn2:function(e,t){layer.close(e)}}),(t.splitOrderSn||t.orderSn)&&(0,n.echo)().data({act:t.yundanInfoAct,splitOrderSn:t.splitOrderSn,orderSn:t.orderSn}).succ(function(t){var a="";for(var i in t.list)a+=' <li class="layui-timeline-item">\n    <i class="layui-icon layui-timeline-axis">&#xe63f;</i>\n    <div class="layui-timeline-content layui-text">\n      <p>\n      '+t.list[i].time+":"+t.list[i].context+" \n      </p>\n    </div>\n  </li>";e(".yundan-info").html(a)}).post(),t.form&&t.form.render(null,"yundan-form")},t.openModifyAdd=function(t){layer.open({type:1,content:'<div class="layui-form"  id="modify-add"  lay-filter="modify-add-form">\n    <div class="layui-form-item" style="margin-top: 20px">\n              <label  class="layui-form-label label-w120">收件人</label>\n               <div class="layui-input-inline">\n                <input type="text"  placeholder="收件人"  name="receiverName" class="layui-input" lay-verify="must" must="收件人不能为空">\n        </div>\n    </div>\n        <div class="layui-form-item" >\n              <label  class="layui-form-label label-w120">联系电话</label>\n               <div class="layui-input-inline">\n                <input type="text" placeholder="联系电话"  name="receiverPhone" class="layui-input"  lay-verify="telephone" info="手机号错误">\n        </div>\n    </div>\n    <div class="province-city-area">\n               <div class="layui-form-item">\n              <label  class="layui-form-label label-w120">省份</label>\n               <div class="layui-input-inline">\n              <select  name="province" lay-filter="modify-add-province-city-area" lay-verify="must" must="请选择省份">\n              <option value="" code="">请选择</option>\n              \n                '+function(e){var t="";for(var a in e)t+='<option value="'+e[a].name+'" code="'+e[a].code+'">'+e[a].name+"</option>";return t}(t.province)+'\n      </select>\n        </div>\n        </div>\n               <div class="layui-form-item">\n              <label  class="layui-form-label label-w120">城市</label>\n               <div class="layui-input-inline">\n              <select name="city" lay-filter="modify-add-province-city-area" lay-verify="must" must="请选择城市">\n        <option value="" ></option>\n      </select>\n        </div>\n        </div>\n               <div class="layui-form-item">\n              <label  class="layui-form-label label-w120">区</label>\n               <div class="layui-input-inline">\n              <select name="area"  lay-verify="must" must="请选择区域">\n        <option value="" ></option>\n      </select>\n        </div>\n        </div>\n        </div>\n        <div class="layui-form-item" >\n              <label  class="layui-form-label label-w120">详细地址</label>\n               <div class="layui-input-inline">\n                <input type="text"  placeholder="详细地址"  class="layui-input" name="address" lay-verify="must" must="详细地址不能为空">\n        </div>\n    </div>\n        <div class="layui-form-item" >\n              <label  class="layui-form-label label-w120">邮编</label>\n               <div class="layui-input-inline">\n                <input type="text"  placeholder="邮编"  class="layui-input" name="code">\n                <input type="button" lay-submit hidden id="modify-add-btn" lay-filter="'+t.layFilter+'"> \n        </div>\n    </div>\n</div>',btn:["确定","取消"],closeBtn:0,area:["auto","600px"],title:"修改地址",yes:function(t,a){e("#modify-add-btn").click()},btn2:function(e,t){layer.close(e)}}),t.form&&t.form.render(null,"modify-add-form")},t.openRefund=function(t){layer.open({type:1,area:["400px"],content:'<div class="layui-form" style="margin-top: 20px"  lay-filter="refund-form" id="refund-form">\n        <div class="layui-form-item" >\n              <label  class="layui-form-label">退款数量</label>\n               <div class="layui-input-inline" style="width: 250px">\n                <input  type="text" id="refund-num" placeholder="退款数量"  class="layui-input" >\n        </div>\n        </div>\n          <div class="layui-form-item" >\n              <label  class="layui-form-label">退款原因</label>\n               <div class="layui-input-inline" style="width: 250px">\n                <input  type="text" id="refund-result" placeholder="退款原因"  class="layui-input" >\n        </div>\n    </div>\n</div>',btn:["确定","取消"],closeBtn:0,title:"退款",yes:function(a,i){var n=e("#refund-num").val();if(!/^[0-9]+$/.test(n))return e.tips("退款数量必须是整数",4),!1;if(Number.parseInt(n)<1)return e.tips("退款数量必须大于0",4),!1;if(n>t.num)return e.tips("退款数量大于实际数量",4),!1;var l=e("#refund-num").val();if(!l)return e.tips("请输入退款原因",4),!1;t.succ(n,l),layer.close(a)},btn2:function(e,t){layer.close(e)}}),t.form&&t.form.render(null,"yundan-form")},t.backgroundImg=function(e){return"background-image:url("+e+")"},t.openTable=function(e){layer.open({type:1,area:["700px","auto"],content:'\n        <table class="layui-table" style="margin:50px auto;width: 80%">\n        <thead>\n        <tr>\n         <th>品牌</th>\n        <th>名称</th>\n        <th>'+e[0].model+"</th>\n        <th>数量</th>\n</th>\n</thead>\n        "+function(e){var t="";for(var a in e)t+="<tr><td>"+e[a].brandName+"</td><td>"+e[a].productName+"</td><td>"+e[a].attr+"</td><td>"+e[a].num+"</td></tr>";return t}(e)+"\n        </table>\n        "})}}).call(this,a(3),a(5))},,function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.echo=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=a(0);t.echo=function(t){var a=new Object;return a.isasync=!1,a.beforeSend=function(){},a.url=t||n.requestUrl.mainUrl,a.post=function(){a.isasync=!0,a.ajax("POST")},a.get=function(){a.isasync=!0,a.ajax("GET")},a.async=function(){a.isasync=!1,a.ajax("POST")},a.data=function(t,i){return e.stringIsBlank(n.requestUrl.token)?(this.data={data:JSON.stringify(t)},this.echa=!0):i?(this.data=t,this.echa=!1):(this.data={data:JSON.stringify(t),token:n.requestUrl.token},this.echa=!0),a},a.loading=function(e,t){return a.beforeSend=function(){switch(t){case 1:this.layerIndex=layer.load(1);break;case 2:this.layerIndex=layer.msg(e,{icon:16,shade:.01,time:0});break;default:this.layerIndex=layer.msg("加载中",{icon:16,shade:.01,time:0})}},a},a.complete=function(){return layer.close(this.layerIndex),a},a.err=function(e){return void 0!=(void 0===e?"undefined":i(e))&&(a.error=e),a},a.succ=function(e){return void 0!=(void 0===e?"undefined":i(e))&&(a.success=e),a},a.dataFilter=function(t){switch(e.stringIsBlank(t)||(t=JSON.parse(t)),t.code){case 200:return t.data||t.datalist||!0;case 600:return layer.msg(""+t.message),n.requestUrl.token="",!1;default:return layer.msg(t.message||"发生未知错误",{icon:5,anim:6}),!1}return!1},a.ajax=function(t){e.ajax(a.url,{type:t,data:this.data,dataType:"text",success:a.success,error:a.error||function(){layer.msg("发生错误，稍后再试")},beforeSend:a.beforeSend,cache:this.echa,processData:this.echa,contentType:!!this.echa&&"application/x-www-form-urlencoded",complete:a.complete,dataFilter:a.dataFilter,async:a.isasync})},a}}).call(this,a(3))},,function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=T(a(43)),n=T(a(42)),l=T(a(41)),o=T(a(40)),r=T(a(39)),d=T(a(38)),s=T(a(37)),c=T(a(36)),u=T(a(35)),f=T(a(34)),m=T(a(33)),p=T(a(32)),b=T(a(31)),y=T(a(30)),v=T(a(29)),g=T(a(28)),h=T(a(27)),_=T(a(26)),k=T(a(25)),S=T(a(24)),O=T(a(23)),B=T(a(22)),x=T(a(21)),w=T(a(20)),P=T(a(19)),N=T(a(18)),L=T(a(17)),I=T(a(16)),C=T(a(15)),D=T(a(14));function T(e){return e&&e.__esModule?e:{default:e}}var A={overview:function(e){return(0,d.default)(e)},classification_of_goods_index_yj:function(e){return(0,u.default)(e)},classification_of_goods_index_bk:function(e){return(0,h.default)(e)},classification_of_goods_edit:function(e){return(0,y.default)(e)},classification_of_goods_administration_yj:function(e){return(0,m.default)(e)},classification_of_goods_administration_bk:function(e){return(0,k.default)(e)},classification_of_goods_bk_edit:function(e){return(0,_.default)(e)},brand_management:function(e){return(0,c.default)(e)},stock_order_list:function(e){return(0,s.default)(e)},stock_order_list_bk:function(e){return(0,x.default)(e)},stock_order_edit:function(e){return(0,p.default)(e)},stock_order_edit_bk:function(e){return(0,w.default)(e)},commodity_return_list:function(e){return(0,N.default)(e)},option_template:function(e){return(0,i.default)(e)},purchasing_agent_management:function(e){return(0,v.default)(e)},purchasing_agent_management_address:function(e){return(0,f.default)(e)},index_banner_management:function(e){return(0,b.default)(e)},index_banner_edit:function(e){return(0,n.default)(e)},admin_management:function(e){return(0,l.default)(e)},admin_edit:function(e){return(0,o.default)(e)},classification_of_goods_classification:function(e){return(0,r.default)(e)},brand_list:function(e){return(0,g.default)(e)},special_offer:function(e){return(0,S.default)(e)},add_special_offer:function(e){return(0,O.default)(e)},free_shipping:function(e){return(0,B.default)(e)},commodity_return_edit:function(e){return(0,P.default)(e)},distributive_buyer:function(e){return(0,L.default)(e)},excel_export:function(e){return(0,I.default)(e)},delivery_management:function(e){return(0,C.default)(e)},delivery_management_detail:function(e){return(0,D.default)(e)}};t.default=function(t){var a=t||{};layui.use("element",function(){var t=layui.element,i=a.elem;({tabAdd:function(){var i,n=e(this);if("on"!=n.attr("flag")){i=(new Date).getTime(),a.id=i,n.attr("tag-id",i);var l,o=e(this).attr("supplementary-title")?e(this).attr("supplementary-title"):"",r=e("."+n.attr("data-clone")).clone().find(".clone").addClass("cloned").addClass("c"+i).attr("type",o).end();"edit"==n.attr("btn-type")&&r.find(".layui-form").attr("flag","edit"),l=r.html(),n.attr("flag","on"),t.tabAdd("taskbar",{title:n.text()+o,content:l,id:i}).tabChange("taskbar",e(this).attr("tag-id"));var d=n.attr("bar-type").replace(/-/g,"_");A[d](a)}else t.tabChange("taskbar",e(this).attr("tag-id"))}}).tabAdd.call(i,i)})}}).call(this,a(3))},,,function(e,t,a){"use strict";(function(e){var t=a(2),i=a(0);e.component("delivery-management-detail",{props:{data:Object},delimiters:["*{{","}}"],template:'<div>\n     <h2-title title="订单查看"></h2-title>\n                <div class="layui-row layui-col-space10">\n                    <div class="layui-col-xs6">\n                        <div class="">\n                            <table class="layui-table">\n                                <thead>\n                                <tr>\n                                    <th colspan="2">订单编号*{{data.orderSn}}</th>\n                                </tr>\n                                </thead>\n                                <tr>\n                                    <td>子订单编号</td>\n                                    <td>*{{data.splitOrderSn}}</td>\n                                </tr>\n                                <tr>\n                                    <td>订单状态</td>\n                                    <td>*{{data.orderStatus}}</td>\n                                </tr>\n                                <tr>\n                                    <td>运费</td>\n                                    <td>*{{data.distributionFee}}元</td>\n                                </tr>\n\n                            </table>\n                        </div>\n                    </div>\n\n                    <div class="layui-col-xs6">\n                        <div class="">\n                            <table class="layui-table">\n                                <thead>\n                                <tr>\n                                    <th colspan="2">客户明细</th>\n                                </tr>\n                                </thead>\n                                <tr>\n                                    <td>姓名</td>\n                                    <td>*{{data.nickname}}</td>\n                                </tr>\n                                <tr>\n                                    <td>EMAILL</td>\n                                    <td>*{{data.email}}</td>\n                                </tr>\n                                <tr>\n                                    <td>电话</td>\n                                    <td>*{{data.phone}}</td>\n                                </tr>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n                <h2-title title="订单资料"></h2-title>\n                <div class="padding15" >\n                    <div class="layui-row shipping-address-title">配送地址</div>\n                    <div class="layui-row shipping-address-content">*{{data.address.receiverName}}（*{{data.address.receiverPhone}}） *{{data.address.province}} *{{data.address.city}} *{{data.address.area}}*{{data.address.address}}</div>\n                 \n\n                    <table class="layui-table" id="delivery-management-detail-table" lay-filter="delivery-management-detail-table">\n\n                    </table>\n                </div>\n                 <div v-if="data.orderStatus != \'waitforpay\'&&data.orderStatus != \'cancel\'">\n                <h2-title title="物流信息" ></h2-title>\n                <div class="layui-form">\n                    <div class="layui-form-item">\n                        <label class="layui-form-label">运单号 </label>\n                        <div class="layui-input-inline"><div class="layui-form-mid">*{{data.company}}&nbsp;&nbsp;*{{data.deliverySn}}</div></div>\n                        <button class="layui-btn" @click="openYundan"> *{{data.deliverySn?\'修改\':\'添加\'}}</button>\n                    </div>\n                    <ul class="layui-timeline">\n                        <li class="layui-timeline-item" v-if="data.deliveryList.length<1 ">\n                            <i class="layui-icon layui-timeline-axis">&#xe63f;</i>\n                            <div class="layui-timeline-content layui-text">\n                                <h3 class="layui-timeline-title"></h3>\n                                <p>\n                                    暂无物流信息\n                                </p>\n                            </div>\n                        </li>\n                        <li class="layui-timeline-item" v-for="h in data.deliveryList ">\n                            <i class="layui-icon layui-timeline-axis">&#xe63f;</i>\n                            <div class="layui-timeline-content layui-text">\n                                <h3 class="layui-timeline-title">*{{h.time}}</h3>\n                                <p>\n                                    *{{h.context}}\n                                </p>\n                            </div>\n                        </li>\n\n                    </ul>\n                </div>\n                 </div>\n</div>\n    ',methods:{openYundan:function(){var e=this;(0,i.openYunDan)({form:layui.form,splitOrderSn:this.data.splitOrderSn,yundanInfoAct:i.act.bcSplitOrder_getDelivery,succ:function(a,n){(0,t.echo)().data({act:i.act.bcSplitOrder_delivery,splitOrderSn:e.data.splitOrderSn,code:a,deliverySn:n,update:1}).succ(function(t){t&&(e.data.deliverySn=n,e.data.deliveryList=t.deliveryList)}).loading().post()}})}},mounted:function(){layui.table.render({elem:"#delivery-management-detail-table",url:"",cols:[[{field:"brandName",title:"品牌"},{field:"productName",title:"商品名称",width:"30%"},{field:"attr",title:"型号"},{field:"ref",title:"REF"},{field:"num",title:"数量"},{field:"productPrice",title:"单价（元）"}]],page:!0,data:this.data.items})}})}).call(this,a(1))},function(e,t,a){"use strict";(function(e){var t=a(2),i=a(0);e.component("delivery-management",{props:{},delimiters:["${{","}}"],template:' <div> <h2-title title="发货管理"></h2-title>\n     <div class="layui-collapse">\n                    <div class="layui-colla-item">\n                        <h2 class="layui-colla-title">筛选条件</h2>\n                        <div class="layui-colla-content layui-show">\n                            <div class="layui-form" lay-filter="delivery-management-form">\n                                <div class="layui-inline">   <input type="text" name="orderSn" placeholder="主订单号" autocomplete="off" class="layui-input"></div>\n                                <div class="layui-inline">   <input type="text" name="SplitOrderSn" placeholder="子订单号" autocomplete="off" class="layui-input"></div>\n                                <div class="layui-inline">  <input type="text" name="phone" placeholder="客户手机" autocomplete="off" class="layui-input"></div>\n                                <div class="layui-inline">  <select name="region" >\n                                    <option value="">请选择</option>\n                                    <option v-for="a in add" :value="a.name" v-text="a.name"></option>\n                            \n                                </select></div>\n                                <div class="layui-inline">   <select name="orderStatus" >\n                                    <option value="">订单状态</option>\n                                    <option value="">全部</option>\n                                    <option value="pendingDelivery">待发货</option>\n                                    <option value="delivered">已发货</option>\n                                    <option value="complete">已完成</option>\n                                    <option value="refused">拒签</option>\n                            \n                                </select></div>\n                                <div class="layui-inline"><button class="layui-btn" lay-submit  lay-filter="delivery-management-form-submit">筛选</button></div>\n                           \n                            </div>\n                        </div>\n                <table class="layui-hide" id="delivery-management-table" lay-filter="delivery-management-table" ></table>\n \n               </div>\n        </div>\n     \n        <script type="text/html" id="delivery-management-table-bar">\n    {{# if(d.orderStatus == \'待发货\'||d.orderStatus == \'已发货\'||d.orderStatus == \'已完成\'){ }}\n    <a class="layui-btn layui-btn-xs"  lay-event="waybill-number">运单号</a>\n    {{# } }}\n\n    <a class="layui-btn layui-btn-xs site-active-edit"  data-clone="delivery-management-detail-clone" bar-type="delivery_management_detail" lay-event="edit" btn-type="edit">查看/编辑</a>\n\n    {{# if(d.orderStatus == \'待支付\'){ }}\n    <a class="layui-btn layui-btn-xs"  lay-event="cancel">取消</a>\n    {{# } }}\n    {{# if(d.orderStatus == \'待接单\'){ }}\n    <a class="layui-btn layui-btn-xs"  lay-event="takingOrder">接单</a>\n    {{# } }}\n    {{# if(d.orderStatus == \'已接单\'){ }}\n    <a class="layui-btn layui-btn-xs"  lay-event="replaceOrder">代下单</a>\n    {{# } }}\n    {{# if(d.orderStatus == \'待确认\'){ }}\n    <a class="layui-btn layui-btn-xs"  lay-event="confirm">确认</a>\n    {{# } }}\n    {{# if(d.orderStatus == \'全部驳回\'){ }}\n    <a class="layui-btn layui-btn-xs"  lay-event="nogoods">无货</a>\n    {{# } }}\n    {{# if(d.orderStatus == \'抢购中\'||d.orderStatus == \'已接单\'||d.orderStatus == \'待购买\'||d.orderStatus == \'待确认\'||d.orderStatus == \'无货\'||d.orderStatus == \'全部驳回\'){ }}\n    <a class="layui-btn layui-btn-xs site-active-edit" data-clone="distributive-buyer-clone" bar-type="distributive-buyer"  lay-event="distributive-buyer">分配买手</a>\n    {{# } }}\n<\/script>\n     </div>\n    ',data:function(){return{add:[]}},mounted:function(){var e=this;(0,t.echo)().data({act:i.act.reConfig_getRegionList}).succ(function(t){t&&(e.add=t)}).post()},updated:function(){layui.use(["form"],function(){layui.form.render(null,"delivery-management-form")})}})}).call(this,a(1))},function(e,t,a){"use strict";(function(e){e.component("classification-of-goods-classification",{props:{},delimiters:["${{","}}"],template:' <div> <h2-title title="型号模板"></h2-title>\n                <button class="layui-btn layui-btn-sm site-active-edit new-model"  data-clone="option-template-clone"  bar-type="option-template" >新建型号</button>\n                <table class="layui-hide" id="classification-of-classification-goods"  lay-filter="classification-of-classification-goods"></table>\n \n    <script type="text/html" id="classification-of-goods-classification-bar" >\n    <a class="layui-btn layui-btn-xs classification-of-goods-edit-click site-active-edit"  data-type="tabAdd" data-clone="option-template-clone" lay-event="edit"  bar-type="option-template"  btn-type="edit">编辑</a>\n    <\/script>\n    <script type="text/html" id="classification-of-goods-classification-check">\n    <input type="checkbox"  value="{{d.id}}" lay-skin="switch" lay-text="启用|禁用" {{ d.status == \'1\' ? \'checked\' : \'\' }} lay-filter="classification-of-goods-classification-check">\n    <\/script>\n    <script type="text/html" id="classification-of-goods-classification-son">\n    {{# for(var t in d.list){ }}\n        {{ d.list[t].name }},\n   {{# } }}\n    <\/script>\n   \n    </div>\n    '})}).call(this,a(1))},function(e,t,a){"use strict";(function(e,t){var i=a(0),n=a(2);e.component("special-offer-edit",{props:{specialOffer:Object,flag:String},data:function(){return{isShow:!1,isAttrShow:!1}},template:'<div>\n   <h2-title title="特价配置"></h2-title>\n   <div class="layui-form" lay-filter="special-offer-edit" :flag="flag">\n     <div class="layui-form-item">\n        <label class="layui-form-label">商品类型</label>\n        <div class="layui-input-inline">\n        <select disabled>\n        <option value="1">一件代发</option>\n        <option value="2">预约爆款</option>\n        </select>\n        </div>\n    </div>\n     <div class="layui-form-item">\n        <label class="layui-form-label">商品</label>\n        <div class="layui-input-inline">\n        <div v-if="specialOffer.id">\n           <input name="id" hidden :value="specialOffer.id">\n           <input class="layui-input layui-disabled" :value="specialOffer.name" readonly>\n           </div>\n        <div class="layui-form-select layui-form-selected" v-else>\n        <div class="layui-select-title">\n        <input type="text" placeholder="请输入商品名" v-model="specialOffer.goodsName" id="query-goods" class="layui-input" @keydown="queryGoods($event)" lay-verify="must" must="请添加商品">\n        <input type="text"  name="pid" v-model="specialOffer.pid" hidden>\n        <i class="layui-edge"></i></div>\n        <dl class="layui-anim layui-anim-upbit query-goods" style="">\n        <dd  v-for="good in specialOffer.goods" v-text="good.name" @click="goodsSelect(good)"></dd>\n        </dl></div>\n       \n       \n        </div>\n    </div>\n     <div class="layui-form-item">\n        <label class="layui-form-label">商品型号</label>\n        <div class="layui-input-inline" v-if="specialOffer.attr">\n          <input class="layui-input layui-disabled" name="skuId" :value="specialOffer.attr" readonly>\n        </div>\n        <div class="layui-input-inline" v-else>\n            <select  lay-filter="specialOffer-attr-select" id="specialOffer-select" name="skuId" lay-verify="selectthan0" info="一个型号"> \n            <option value="0" selected disabled>请选择</option>\n            <option v-for="attr in specialOffer.attrs" v-text="attr.attr" :value="attr.id" :price="attr.price" ></option>\n            </select>\n        </div>\n      \n    </div>\n     <div class="layui-form-item">\n        <label class="layui-form-label">特价</label>\n        <div class="layui-input-inline"><input class="layui-input" name="price" :value="specialOffer.price" lay-verify="price"></div>\n    </div>\n     <div class="layui-form-item">\n        <label class="layui-form-label">原价</label>\n        <div class="layui-input-inline"><input class="layui-input layui-disabled" name="originalPrice" id="specialOffer-price" :value="specialOffer.originalPrice" readonly></div>\n    </div>\n     <div class="layui-form-item">\n        <label class="layui-form-label">排序</label>\n        <div class="layui-input-inline"><input class="layui-input" name="priority" :value="specialOffer.priority" lay-verify="int"></div>\n    </div>\n     <div class="layui-form-item">\n        <label class="layui-form-label">生效时间</label>\n        <div class="layui-input-block"><input :value="specialOffer.specialOfferTime" class="layui-input" id="special-offer-time" lay-verify="must" must="请选择生效日期"  readonly>\n        <input  id="special-offer-start" name="startTime" :value="specialOffer.startTime" hidden>\n        <input  id="special-offer-end" name="endTime" :value="specialOffer.endTime" hidden>\n        </div>\n    </div>\n \n     <div class="layui-form-item">\n        <label class="layui-form-label"></label>\n        <div class="layui-input-inline"><button class="layui-btn" lay-submit lay-filter="special-offer-edit-submit">提交</button></div>\n    </div>\n\n</div>\n</div>\n    ',mounted:function(){layui.use(["form","laydate"],function(){layui.form.render(null,"special-offer-edit"),layui.laydate.render({elem:"#special-offer-time",type:"datetime",range:"至",done:function(e,a,i){if(!t.stringIsBlank(e)){var n=e.split("至");t("#special-offer-start").val(n[0].trim()),t("#special-offer-end").val(n[1].trim())}}}),layui.laydate.render({elem:"#special-offer-end",type:"datetime"})})},updated:function(){this.isShow&&t(".query-goods").addClass("layui-show"),this.isAttrShow&&(layui.form.render("select","special-offer-edit"),this.isAttrShow=!1)},methods:{queryGoods:function(e){if(13==e.keyCode){var a=t("#query-goods").val(),l={};l.name=a,l.act=i.act.reBcSpecialProduct_getProductList;var o=this;(0,n.echo)().data(l).succ(function(e){o.isShow=!0,o.specialOffer.goods=e}).loading().post()}},goodsSelect:function(e){this.specialOffer.goodsName=e.name,this.isShow=!1,this.specialOffer.pid=e.id,t(".query-goods").removeClass("layui-show");var a={},l=this;a.act=i.act.reBcSpecialProduct_getSkuList,a.id=e.id,(0,n.echo)().data(a).succ(function(e){e&&(l.specialOffer.attrs=e,l.isAttrShow=!0)}).loading().post()}}})}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e){e.component("free-shipping",{props:{shippingData:Object},template:'\n<div>\n   <h2-title title="包邮配置"></h2-title>\n   <div class="layui-form" lay-filter="free-shipping">\n     <div class="layui-form-item">\n        <label class="layui-form-label">包邮范围</label>\n        <div class="layui-input-inline">\n        <select name="cType" lay-verify="selectthan0">\n           <option  v-for="op in shippingData.options" :value="op.value" v-text="op.name" ></option>\n        </select>\n        </div>\n    </div>\n     <div class="layui-form-item">\n        <label class="layui-form-label">包邮底价</label>\n        <div class="layui-input-inline"><input class="layui-input" lay-verify="price" name="value" :value="shippingData.price"></div>\n    </div>\n     <div class="layui-form-item">\n        <label class="layui-form-label"></label>\n        <div class="layui-input-inline"><button class="layui-btn" lay-submit lay-filter="free-shipping-submit">提交</button></div>\n    </div>\n</div>\n</div>\n    \n    ',mounted:function(){layui.use(["form"],function(){layui.form.render(null,"free-shipping")})}})}).call(this,a(1))},function(e,t,a){"use strict";(function(e){e.component("special-offer",{template:'<div><h2-title title="特价管理"></h2-title>\n   <div class="special-offer-searchTable layui-form">\n                    搜索名称：\n                    <div class="layui-inline">\n                        <input class="layui-input" name="name" autocomplete="off">\n                    </div>\n                    <button class="layui-btn" lay-submit  lay-filter="special-offer-search-table">搜索</button>\n                    <div  style="margin-top: 20px" class="at-least-one">\n                        <button class="layui-btn layui-btn-sm site-active-edit add-special-offer-btn"  data-clone="special-offer-edit-clone"  bar-type="add-special-offer">新增</button>\n                    </div>\n                </div>\n                <table class="layui-hide" id="special-offer-table"  lay-filter="special-offer-table"></table>\n                <script type="text/html" id="special-offer-table-bar">\n                 <a class="site-active-edit layui-btn  layui-btn-xs" lay-event="detail" data-clone="special-offer-edit-clone" bar-type="add-special-offer"  btn-type="edit">编辑</a>\n                 <\/script>\n                 </div>\n'})}).call(this,a(1))},function(e,t,a){"use strict";(function(e,t,i){var n=a(0),l=a(2);function o(e){layer.prompt({title:"请输入值"},function(a,i,n){t(e.elem).val(e.title+"限购"+a+"件").next().val(e.limit1).next().val(a),e.elem.dispatchEvent(new Event("input")),t(e.elem).next()[0].dispatchEvent(new Event("input")),t(e.elem).next().next()[0].dispatchEvent(new Event("input")),layer.close(i)})}e.component("sku-table-bk",{props:["skuData","modelData","model"],template:'<div>  <div class="layui-form-pane tag-form">\n                                <div class="layui-form-item">\n                                    <label class="layui-form-label">选择模板</label>\n                                    <div class="layui-input-inline">\n                                        <select class="template-select"  lay-search>\n                                            <option v-for="(d,i) in modelData" :value="i" v-text="d.name"  v-if="i==0" selected></option>\n                                            <option  v-text="d.name" :value="i" v-else></option>\n                                        </select>\n                                    </div>\n                                     <div class="layui-inline">\n                                     <button class="layui-btn layui-btn-normal add-template" @click="addModel()">添加</button>\n                                    <button class="layui-btn layui-btn-normal add-template" @click="fullAll()">批量填充数据</button>\n                                        </div>\n                                    <div class="layui-input-inline"> <input  class="layui-input" name="model" :value="model.name" placeholder="sku分类名"></div>\n                                   \n                                </div>\n                                </div>\n                             \n                           \n                            \n <table class="layui-table layui-form sku-table" lay-filter="sku-template-form-bk" > <tr v-for="(data,i) in skuData">\n                                            <td class="sku-td">\n                                            <input name="id" :value="data.id" hidden>\n                                                <div class="layui-form-item layui-inline"><label class="layui-form-label">型号</label><div class="layui-input-inline"><input class="layui-input" v-model="data.attr" name="attr" lay-verify="must"  must="请填写型号名称"></div></div>\n                                                <div class="layui-form-item layui-inline"><label class="layui-form-label">销售价</label><div class="layui-input-inline"><input class="layui-input" v-model="data.price" name="price" lay-verify="price"></div></div>\n                                                <div class="layui-form-item layui-inline"><label class="layui-form-label">成本价</label><div class="layui-input-inline"><input class="layui-input" v-model="data.costPrice" name="costPrice" lay-verify="notmustprice"></div></div>\n                                                <div class="layui-form-item layui-inline"><label class="layui-form-label">免税价</label><div class="layui-input-inline"><input class="layui-input" v-model="data.dutyFreePrice" name="dutyFreePrice" lay-verify="notmustprice"></div></div>\n                                                <div class="layui-form-item layui-inline"><label class="layui-form-label">库存</label><div class="layui-input-inline"><input class="layui-input"  v-model="data.stock" name="stock" lay-verify="notmustint"></div></div>\n                                                <div class="layui-form-item layui-inline"><label class="layui-form-label">ref编码</label><div class="layui-input-inline"><input class="layui-input"  v-model="data.ref" name="ref"></div></div>\n                                                <div class="layui-form-item layui-inline"><label class="layui-form-label">最少购买</label><div class="layui-input-inline"><input class="layui-input"  v-model="data.minPurchaseNum" name="minPurchaseNum"  lay-verify="int"></div></div>\n                                                <div class="layui-form-item layui-inline"><label class="layui-form-label">限制条件</label><div class="layui-input-inline" @click="limit($event)"><input class="layui-input" readonly name="limitTimelimitNum"  v-model="data.limitTimelimitNum"><input hidden   name="limitTime"  v-model="data.limitTime"><input hidden name="limitNum"  v-model="data.limitNum"></div></div>\n                                              <div class="layui-form-item layui-inline"><label class="layui-form-label">图片</label><div class="layui-inline"><button class=" layui-btn" @click="addImg($event.target)">上传图片</button><input name="sku-img" v-model=\'data.img\' hidden><input type="file" accept="image/gif,image/jpeg,image/jpg,image/png" class="sku-img" @change="change($event.target,i,\'skuImg\')" hidden><div class="backimg-c layui-inline" style="width: 40px;height: 40px" :style=\'"background-image:url("+data.img+")"\'>{{data.percent?data.percent:\'\'}}</div></div></div>\n                                              <div class="layui-form-item layui-inline"><label class="layui-form-label">详情图</label><div class="layui-inline"><button class=" layui-btn" @click="addImg($event.target)">上传图片</button><input name="sku-detail-img" v-model=\'data.detailImg\' hidden><input type="file" accept="image/gif,image/jpeg,image/jpg,image/png" class="sku-img" @change="change($event.target,i,\'detailImg\')" hidden><div class="backimg-c layui-inline" style="width: 40px;height: 40px" :style=\'"background-image:url("+data.detailImg+")"\'>{{data.DetialPercent?data.DetialPercent:\'\'}}</div></div></div>\n                                                <div class="layui-form-item layui-inline"><label class="layui-form-label">启用</label>\n                                                <div class="layui-input-inline" v-if="data.status==1">  <input type="checkbox" name="status" lay-skin="switch" lay-text="启用|禁用" checked value="1"></div>\n                                                <div class="layui-input-inline" v-else>  <input type="checkbox" name="status" lay-skin="switch" lay-text="启用|禁用" value="1" ></div>\n                                                </div>\n                                                <div class="layui-form-item layui-inline"><div class="layui-input-inline"><button class="layui-btn layui-btn-danger " @click="del(i)"><i class="layui-icon" >&#xe640;</i>  </button></div></div>\n                                            </td>\n                                        </tr>\n                                           <tr v-if="skuData.length>0">\n                                            <td>\n                                                <button class="layui-btn layui-btn-normal" @click="add()">点击这里增加新的一行</button>\n                                            </td>\n                                        </tr>\n                                           <tr >\n                                            <td  v-if="skuData.length>0">\n                                                <button class="layui-btn" lay-submit lay-filter="sku-template-form-submit-bk" type="reset" style="border: none">提交保存</button>\n                                            </td>\n                                        </tr>\n                                        </table>\n                                        </div> \n',methods:{change:function(e,a,l){this.skuData[a].subscription&&this.skuData[a].subscription.unsubscribe();var o={fname:e.files[0].name,params:{}},r=(0,n.uuid)(),d=this,s={next:function(e){"skuImg"==l?d.skuData[a].percent=Math.round(e.total.percent):d.skuData[a].DetialPercent=Math.round(e.total.percent)},error:function(e){t.tips("上传过程出现错误，稍后再试",4),"skuImg"==l?d.skuData[a].percent=0:d.skuData[a].DetialPercent=0},complete:function(i){"skuImg"==l?d.skuData[a].percent=0:d.skuData[a].DetialPercent=0,d.skuData[a].uploading=!1,"skuImg"==l?(d.skuData[a].img=""+n.imgADD.add+r+n.imgADD.productImg,t(e).next().css("background-image","url('"+d.skuData[a].img+"')")):(d.skuData[a].detailImg=""+n.imgADD.add+r+n.imgADD.productImg,t(e).next().css("background-image","url('"+d.skuData[a].detailImg+"')"))}},c=i.upload(e.files[0],r,this.uploadToken,o,n.uploadConfig);this.skuData[a].subscription=c.subscribe(s),this.skuData[a].uploading=!0,"skuImg"==l?this.skuData[a].img="true":this.skuData[a].detailImg="true"},addImg:function(e){var a=this;return this.uploadToken||(0,l.echo)().data({act:n.act.upload_upload}).succ(function(e){e?a.uploadToken=e.uploadToken:t.tips("上传接口打开失败，请稍后再试",4)}).err(function(){t.tips("上传接口打开失败，请稍后再试",4)}).async(),t(e).next().next().click()},addModel:function(){var e=t(".cloned .template-select").val();for(var a in this.model.name=this.modelData[e].name,this.modelData[e].list)this.add(this.modelData[e].list[a].name)},add:function(e){this.skuData.push({attr:e,status:1})},del:function(e){var t=this.skuData;layer.confirm("删除后，数据不会保留！",{icon:3,title:"提示"},function(a){t[e].id?(0,l.echo)().data({act:n.act.reBcBespeakProductSku_updateStatus,id:t[e].id,status:2}).succ(function(i){i&&(t.splice(e,1),layer.close(a))}).loading("删除中").post():(t.splice(e,1),layer.close(a))})},limit:function(e){!function(e,t){layer.open({type:1,title:"限购条件",content:"",btn:["每周","每月","每季","每年"],btn4:function(a,i){o({elem:e.target||e,title:this.btn[3],limit1:4,data:t}),layer.close(a)},btn3:function(a,i){o({elem:e.target||e,title:this.btn[2],limit1:3,data:t}),layer.close(a)},btn2:function(a,i){o({elem:e.target||e,title:this.btn[1],limit1:2,data:t}),layer.close(a)},yes:function(a,i){o({elem:e.target||e,title:this.btn[0],limit1:1,data:t}),layer.close(a)}})}(e,this.skuData)},fullAll:function(){var e=t(".fullAll").clone().children(".layui-form").addClass("cloned").end().html(),a=this.skuData;layer.open({title:"批量填充数据",content:e,yes:function(e,i){var n=t(i.selector),l=n.find("input[name=price]").val(),o=n.find("input[name=costPrice]").val(),r=n.find("input[name=dutyFreePrice]").val(),d=n.find("input[name=stock]").val(),s=n.find("input[name=minPurchaseNum]").val(),c=n.find("input[name=limitTimelimitNum]").val(),u=n.find("input[name=limitTime]").val(),f=n.find("input[name=limitNum]").val();for(var m in a)a[m].price=l||a[m].price,a[m].costPrice=o||a[m].costPrice,a[m].dutyFreePrice=r||a[m].dutyFreePrice,a[m].stock=d||a[m].stock,a[m].limitTimelimitNum=c||a[m].limitTimelimitNum,a[m].minPurchaseNum=s||a[m].minPurchaseNum,a[m].limitTime=u||a[m].limitTime,a[m].limitNum=f||a[m].limitNum;layer.close(e)}})}},updated:function(){layui.use("form",function(){layui.form.render(null,"sku-template-form-bk")})}})}).call(this,a(1),a(3),a(5))},function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});t.default=function(t){var a=t.id;new e({el:".c"+a,delimiters:["${{","}}"],data:{data:t.pid}})}}).call(this,a(1))},function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i,n=a(4),l=(i=n)&&i.__esModule?i:{default:i},o=a(0),r=a(2);t.default=function(t){var a=t.id,i=void new e({el:".c"+a,delimiters:["${{","}}"]}),n=void 0;layui.use(["table","form","laydate"],function(){layui.laydate;var e=layui.form,t=layui.table;e.render(null,"delivery-management-form"),n={act:o.act.bcSplitOrder_getList},i=t.render({elem:".c"+a+" #delivery-management-table",url:o.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(n),token:o.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{field:"orderSn",title:"主订单编号"},{field:"splitOrderSn",title:"子订单编号"},{field:"",title:"商品清单",toolbar:"#stock-order-list-table-items"},{field:"dispatchRegion",title:"发货地"},{field:"phone",title:"客户手机号"},{field:"orderStatus",title:"状态"},{field:"price",title:"子订单总价（元）"},{field:"",title:"操作",toolbar:"#delivery-management-table-bar"}]],page:!0}),t.on("tool(delivery-management-table)",function(t){var a=this,d=t.event,s=t.data;switch(d){case"order-detail":(0,o.openTable)(s.items);break;case"waybill-number":(0,o.openYunDan)({form:e,splitOrderSn:s.splitOrderSn,yundanInfoAct:o.act.bcSplitOrder_getDelivery,succ:function(e,t){(0,r.echo)().data({act:o.act.bcSplitOrder_delivery,splitOrderSn:s.splitOrderSn,code:e,deliverySn:t}).succ(function(e){e&&i.reload()}).loading().post()}});break;case"edit":n={act:o.act.bcSplitOrder_getInfo,splitOrderSn:s.splitOrderSn},(0,r.echo)().data(n).succ(function(e){e&&(0,l.default)({pid:e,elem:a,table:i})}).loading().post()}}),e.on("submit(delivery-management-form-submit)",function(e){(n=e.field).act=o.act.bcSplitOrder_getList,i.reload({where:{data:JSON.stringify(n),token:o.requestUrl.token},page:{curr:1}})})})}}).call(this,a(1))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),l=a(0);t.default=function(t){var a=t.id,o=new e({el:".c"+a,delimiters:["${{","}}"],data:{errors:[]}}),r=void 0;layui.use(["form"],function(){(r=layui.form).render(null,"excel-form"),r.on("submit(excel-form-submit)",function(e){if(!e.field.type)return i.tips("请选择导入类型",4),!1;var t=new FormData;t.append("data",'{"act":"'+l.act[e.field.type]+'"}'),t.append("excelFile",e.form[0].files[0]),t.append("token",l.requestUrl.token),(0,n.echo)().data(t,!0).succ(function(e){o.errors=e}).loading("数据插入中",2).post()})})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i,n=a(4),l=((i=n)&&i.__esModule,a(0)),o=a(2);var r=void 0,d=void 0,s=void 0,c=void 0;t.default=function(t){var a=t.id;s=t.table,layui.use(["upload","form","element","table","laydate"],function(){layui.form,d=layui.table;var i=new e({el:".c"+a,delimiters:["${{","}}"],data:t.pid,computed:{orderStatu:function(){switch(this.orderStatus){case"takingOrder":return"已接单";case"pengdingBuy":return"抢购中";case"waitconfirm":return"待确认";case"allReject":return"全部驳回";case"noGoods":return"无货"}}}});d.render({elem:".c"+a+" #distributive-buyer-items-table",cols:[[{field:"productName",title:"商品名称"},{field:"attr",title:"型号"},{field:"num",title:"数量"},{field:"productPrice",title:"单价（元）"},{field:"total",title:"总价（元）"}]],page:!0,data:t.pid.items}),c=d.render({elem:".c"+a+" #distributive-buyer-table",cols:[[{field:"nickname",title:"买手姓名"},{field:"createTime",title:"接单时间"},{field:"updateTime",title:"操作时间"},{field:"status",title:"状态"},{title:"操作",toolbar:"#distributive-buyer-bar"}]],page:!0,data:t.pid.buyerList}),d.on("tool(distributive-buyer)",function(e){var a=e.data;r={act:l.act.bcBespeakOrder_assign,orderSn:i.orderSn,buyerId:a.id},(0,o.echo)().data(r).succ(function(e){e&&(s.reload(),i.orderStatus="pengdingBuy",(0,o.echo)().data({act:l.act.bcBespeakOrder_getAssignOrderInfo,orderSn:i.orderSn}).succ(function(e){e&&(t.pid=e,c.reload({data:e.buyerList}))}).loading().post())}).loading().post()})})}}).call(this,a(1))},function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i,n=a(0),l=a(2),o=a(4),r=(i=o)&&i.__esModule?i:{default:i};var d=void 0,s=void 0,c=void 0,u=void 0;t.default=function(t){layui.use(["upload","form","element","table","laydate"],function(){c=layui.form;var a=t.id;new e({el:".c"+a,delimiters:["${{","}}"]}),s={act:n.act.bcRefundOrder_getList},d=layui.table,u=d.render({elem:".c"+a+" #commodity-return-list-table",url:n.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(s),token:n.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{field:"refundSn",title:"退款编号"},{field:"orderSn",title:"订单编号"},{field:"",title:"商品清单",toolbar:"#commodity-return-list-table-items"},{field:"nickname",title:"客户"},{field:"orderStatus",title:"状态"},{field:"price",title:"退款总价（元）"},{field:"",title:"操作",toolbar:"#commodity-return-list-table-bar1"}]],page:!0}),c.render(null,"commodity-return-list-clone-form"),c.on("submit(commodity-return-list-clone-form-search)",function(e){(s=e.field).act=n.act.bcRefundOrder_getList,u.reload({where:{data:JSON.stringify(s),token:n.requestUrl.token},page:{curr:1}})}),d.on("tool(commodity-return-list-table)",function(e){var t=this,a=e.event,i=e.data;switch(a){case"order-detail":(0,n.openTable)(i.items);break;case"edit":s={act:n.act.bcRefundOrder_getInfo,refundSn:i.refundSn},(0,l.echo)().data(s).succ(function(e){e&&(0,r.default)({pid:e,elem:t,table:u})}).loading().post()}})})}}).call(this,a(1))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),l=a(2),o=void 0,r=void 0;t.default=function(t){layui.use(["upload","form","element","table","laydate"],function(){o=layui.form;var a=t.id;r=t.table;var d=new e({el:".c"+a,delimiters:["${{","}}"],data:t.pid});layui.table.render({elem:".c"+a+" #commodity-return-edit-table",url:"",cols:[[{field:"brandName",title:"品牌"},{field:"productName",title:"商品名称",width:"30%"},{field:"attr",title:"型号"},{field:"ref",title:"REF"},{field:"num",title:"数量"},{field:"productPrice",title:"单价（元）"},{field:"total",title:"总价（元）"}]],page:!0,data:t.pid.items}),o.on("submit(commodity-return-dismissal)",function(e){layer.prompt({value:"",title:"驳回原因"},function(e,t,a){(0,l.echo)().data({act:n.act.bcRefundOrder_reject,refundSn:d.refundSn,reason:e}).loading().succ(function(e){e&&(i.tips("驳回成功",3),(0,l.echo)().data({act:n.act.bcRefundOrder_getInfo,refundSn:d.refundSn}).succ(function(e){d.orderStatus=e.orderStatus}).loading().post())}).post(),layer.close(t)})}),o.on("submit(commodity-return-refund)",function(e){var t=e.field.price;if(!/^[0-9]+\.?[0-9]*$/.test(t))return i.tips("价格不合法",4),!1;layer.confirm("确定退款?",function(e){(0,l.echo)().data({act:n.act.bcRefundOrder_validate,refundSn:d.refundSn,price:t}).loading().succ(function(e){e&&(i.tips("退款成功",3),r.reload(),(0,l.echo)().data({act:n.act.bcRefundOrder_getInfo,refundSn:d.refundSn}).succ(function(e){d.orderStatus=e.orderStatus,d.hasRefund=e.hasRefund}).loading().post())}).post(),layer.close(e)})})})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),l=a(2),o=void 0,r=void 0,d=void 0,s=void 0,c=void 0;t.default=function(t){layui.use(["upload","form","element","table","laydate"],function(){s=layui.form,c=t.table;var a=t.id,u=new e({el:".c"+a,delimiters:["${{","}}"],data:t.pid,methods:{updateAdd:function(){(0,l.echo)().data({act:n.act.address_getProvinces}).succ(function(e){e&&(0,n.openModifyAdd)({province:e,form:layui.form,layFilter:"modify-add-submit-bk"})}).loading().post()},openYundan:function(){var e=this;(0,n.openYunDan)({form:layui.form,succ:function(t,a){(0,l.echo)().data({act:n.act.bcBespeakOrder_batchDelivery,orderSns:[e.orderSn],code:t,deliverySn:a,update:1}).succ(function(t){t&&(e.deliverySn=a,e.deliveryList=t.deliveryList)}).loading().post()}})}}});r=layui.table;var f=void 0;f="pendingDelivery"==t.pid.orderStatus||"pendingOrder"==t.pid.orderStatus||"takingOrder"==t.pid.orderStatus||"pengdingBuy"==t.pid.orderStatus||"noGoods"==t.pid.orderStatus||"allReject"==t.pid.orderStatus||"overtime"==t.pid.orderStatus?[[{field:"brandName",title:"品牌"},{field:"productName",title:"商品名称",width:"30%"},{field:"attr",title:"型号"},{field:"ref",title:"REF"},{field:"num",title:"数量"},{field:"refundNum",title:"已退数量"},{field:"productPrice",title:"单价（元）"},{field:"total",title:"总价（元）"},{title:"操作",toolbar:"#order-detail-table-bar"}]]:[[{field:"brandName",title:"品牌"},{field:"productName",title:"商品名称",width:"30%"},{field:"attr",title:"型号"},{field:"ref",title:"REF"},{field:"num",title:"数量"},{field:"refundNum",title:"已退数量"},{field:"productPrice",title:"单价（元）"},{field:"total",title:"总价（元）"}]],o=r.render({elem:".c"+a+" #order-detail-table-bk",url:"",cols:f,page:!0,data:t.pid.items}),r.on("tool(order-detail-table-bk)",function(e){var t=e.data;(0,n.openRefund)({form:s,num:t.num-t.refundNum,succ:function(e,a){(0,l.echo)().data({act:n.act.bcBespeakOrder_refund,orderSn:u.orderSn,pid:t.productId,skuId:t.skuId,num:e,remark:a}).succ(function(e){e&&(0,l.echo)().data({act:n.act.bcBespeakOrder_getInfo,orderSn:u.orderSn}).succ(function(e){e&&(o.reload({data:e.items}),i.tips("退款申请成功",3))}).loading().post()}).loading().post()}})}),s.on("submit(modify-add-submit-bk)",function(e){return(d=e.field).orderSn=t.pid.orderSn,d.act=n.act.bcBespeakOrder_updateAddress,(0,l.echo)().data(d).succ(function(t){t&&(i.tips("成功",3),u.address=e.field,c.reload())}).post(),!1}),s.on("select(modify-add-province-city-area)",function(e){var t=void 0,a=i(e.elem),o=a.attr("name");switch(d={},o){case"province":d.act=n.act.address_getCitiesByProvince,t=1,d.provinceCode=a.find("option[value="+e.value+"]").attr("code");break;case"city":d.act=n.act.address_getAreasByCity,t=2,d.cityCode=a.find("option[value="+e.value+"]").attr("code");break;default:return!1}(0,l.echo)().data(d).succ(function(e){var i="<option disabled selected>请选择</option>";for(var n in e)i+="<option code='"+e[n].code+"' value=\""+e[n].name+'">'+e[n].name+"</option>";1==t?(a.parents(".province-city-area").find("select[name=city]").html(i),a.parents(".province-city-area").find("select[name=area]").html("<option disabled selected>请选择</option>")):a.parents(".province-city-area").find("select[name=area]").html(i),s.render("select","modify-add-form")}).post()})})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(0),o=a(2),r=a(4),d=(n=r)&&n.__esModule?n:{default:n};var s=void 0,c=void 0,u=void 0,f=void 0;i(function(){}),t.default=function(t){var a=t.id;new e({el:".c"+a,delimiters:["${{","}}"]}),layui.use(["upload","form","element","table","laydate"],function(){var e=layui.laydate,t=layui.form;t.render(null,"stock-order-search-form"),e.render({elem:".c"+a+" .order-start",type:"datetime"}),e.render({elem:".c"+a+" .order-end",type:"datetime"}),u={act:l.act.bcBespeakOrder_getList},s=layui.table,c=s.render({elem:".c"+a+" #stock-order-list-table-bk",url:l.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(u),token:l.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{checkbox:!0,fixed:!0},{field:"orderSn",title:"订单号",sort:!0,fixed:!0},{field:"phone",title:"客户手机"},{field:"orderStatus",title:"状态"},{field:"",title:"商品清单",toolbar:"#stock-order-list-table-items-bk"},{field:"address",title:"地址"},{field:"restTime",title:"剩余抢购时间"},{field:"",title:"操作",width:270,toolbar:"#stock-order-list-table-bar1-bk"}]],id:".c"+a+"stock-order-list-table-bk",page:!0}),t.on("submit(stock-order-search-form-submit-bk)",function(e){f=e.field.orderStatus,(u=e.field).act=l.act.bcBespeakOrder_getList,c.reload({where:{data:JSON.stringify(u),token:l.requestUrl.token},page:{curr:1}})}),t.on("submit(taking-order)",function(e){if("pendingOrder"==f){var t=s.checkStatus(".c"+a+"stock-order-list-table-bk").data;if(t.length<1)i.tips("请至少选择一个",4);else{var n=[];for(var r in t)n.push(t[r].orderSn);(0,o.echo)().data({act:l.act.bcBespeakOrder_takingOrder,orderSns:n}).succ(function(e){e&&c.reload()}).loading().post()}}else i.tips("请筛选订单后再操作",4)}),t.on("submit(order-confirm)",function(e){if("waitconfirm"==f){var t=s.checkStatus(".c"+a+"stock-order-list-table-bk").data;t.length<1?i.tips("请至少选择一个",4):layer.confirm("确认吗?",function(e){var a=[];for(var i in t)a.push(t[i].orderSn);u={act:l.act.bcBespeakOrder_confirm,orderSns:a},(0,o.echo)().data(u).succ(function(e){e&&c.reload()}).loading().post(),layer.close(e)})}else i.tips("请筛选订单后再操作",4)}),t.on("submit(waybill-number-submit-bk)",function(e){if("pendingDelivery"==f||"delivered"==f||"complete"==f){var n=s.checkStatus(".c"+a+"stock-order-list-table-bk").data;if(n.length<1)i.tips("请至少选择一个",4);else{var r=[];for(var d in n)r.push(n[d].orderSn);(0,l.openYunDan)({form:t,succ:function(e,t){(0,o.echo)().data({act:l.act.bcBespeakOrder_batchDelivery,orderSns:r,code:e,deliverySn:t}).succ(function(e){e&&c.reload()}).loading().post()}})}}else i.tips("请筛选订单后再操作",4);return!1}),s.on("tool(stock-order-list-table-bk)",function(e){var a=this,i=e.event,n=e.data;switch(i){case"order-detail":(0,l.openTable)(n.items);break;case"waybill-number":(0,l.openYunDan)({form:t,orderSn:n.orderSn,yundanInfoAct:l.act.bcBespeakOrder_getDelivery,succ:function(e,t){(0,o.echo)().data({act:l.act.bcBespeakOrder_batchDelivery,orderSns:[n.orderSn],code:e,deliverySn:t}).succ(function(e){e&&c.reload()}).loading().post()}});break;case"refund":layer.prompt({formType:0,title:"请输入退款原因"},function(e,t,a){layer.close(t)});break;case"cancel":layer.prompt({formType:0,title:"请输入取消原因",value:" "},function(e,t,a){u={act:l.act.bcBespeakOrder_cancel,orderSn:n.orderSn,remark:e},(0,o.echo)().data(u).succ(function(e){e&&c.reload()}).loading().post(),layer.close(t)});break;case"edit":u={act:l.act.bcBespeakOrder_getInfo,orderSn:n.orderSn},(0,o.echo)().data(u).succ(function(e){e&&(0,d.default)({pid:e,elem:a,table:c})}).loading().post();break;case"replaceOrder":layer.confirm("确定代下单?",function(e){u={act:l.act.bcBespeakOrder_replaceOrder,orderSn:n.orderSn},(0,o.echo)().data(u).succ(function(e){e&&c.reload()}).loading().post(),layer.close(e)});break;case"takingOrder":u={act:l.act.bcBespeakOrder_takingOrder,orderSns:[n.orderSn]},(0,o.echo)().data(u).succ(function(e){e&&c.reload()}).loading().post();break;case"confirm":layer.confirm("确认吗?",function(e){u={act:l.act.bcBespeakOrder_confirm,orderSns:[n.orderSn]},(0,o.echo)().data(u).succ(function(e){e&&c.reload()}).loading().post(),layer.close(e)});break;case"nogoods":layer.confirm("确认?",function(e){u={act:l.act.bcBespeakOrder_confirmNoGoods,orderSn:n.orderSn},(0,o.echo)().data(u).succ(function(e){e&&c.reload()}).loading().post(),layer.close(e)});break;case"distributive-buyer":(0,o.echo)().data({act:l.act.bcBespeakOrder_getAssignOrderInfo,orderSn:n.orderSn}).succ(function(e){e&&(0,d.default)({pid:e,elem:a,table:c})}).loading().post()}})})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),l=a(2),o=void 0;t.default=function(t){var a={data:{options:[{name:"一件代发",value:1},{name:"预约爆款",value:2},{name:"全部",value:3}],price:99999}};(o={}).act=n.act.reConfig_getInfo,o.clazz=n.config.postage,(0,l.echo)().data(o).succ(function(i){if(i){i.value&&(a.data.price=i.value);var n=a.data.options.splice(i.cType-1,1);n[0]&&a.data.options.unshift(n[0])}var l=t.id;new e({el:".c"+l,delimiters:["${{","}}"],data:a,mounted:function(){}})}).loading().post(),layui.use(["table","form"],function(){layui.form.on("submit(free-shipping-submit)",function(e){(o=e.field).act=n.act.reConfig_doSubmit,o.clazz=n.config.postage,(0,l.echo)().data(o).succ(function(e){e&&i.tips("设置成功",3)}).loading().post()})})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),l=a(2),o=void 0;t.default=function(t){var a={specialOffer:{goods:[],attrs:[]}},r=t.id,d=t.pid,s=t.table;d&&(a.specialOffer=d,a.specialOffer.specialOfferTime=d.startTime+" 至 "+d.endTime);var c=new e({el:".c"+r,delimiters:["${{","}}"],data:a,mounted:function(){layui.use(["table","form"],function(){var e=layui.form;e.on("select(specialOffer-attr-select)",function(e){i("#specialOffer-price").val(i(e.elem).find("option:selected").attr("price"))}),e.on("submit(special-offer-edit-submit)",function(e){var t=void 0;if(o=e.field,Number.parseFloat(e.field.originalPrice)<=Number.parseFloat(e.field.price))return i.tips("特价必须小于原价",4),!1;var a="edit"==i(e.elem).parents(".layui-form").eq(0).attr("flag");return a?(o.act=n.act.reBcSpecialProduct_update,t="修改成功"):(o.act=n.act.reBcSpecialProduct_add,t="添加成功"),(0,l.echo)().data(o).succ(function(e){e&&(a||(c.specialOffer=i.cloneObj({goods:[],attrs:[]})),i.tips(t,3),s.reload())}).loading().post(),!1})})}})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(0),o=a(2),r=a(4),d=(n=r)&&n.__esModule?n:{default:n};var s=void 0,c=void 0;t.default=function(t){var a=t.id;new e({el:".c"+a,delimiters:["${{","}}"],mounted:function(){layui.use(["table","form"],function(){var e=layui.table,t=layui.form;(s={}).act=l.act.reBcSpecialProduct_getList,c=e.render({elem:"#special-offer-table",url:l.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(s),token:l.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{field:"id",title:"编号"},{field:"name",title:"商品"},{field:"attr",title:"商品型号"},{field:"price",title:"特价"},{field:"originalPrice",title:"原价"},{field:"priority",title:"排序"},{field:"status",title:"状态"},{field:"",title:"操作",toolbar:"#special-offer-table-bar"}]],page:!0}),t.on("submit(special-offer-search-table)",function(e){(s=e.field).act=l.act.reBcSpecialProduct_getList,(0,o.echo)().data(s).succ(function(e){e&&c.reload({where:{data:JSON.stringify(s),token:l.requestUrl.token},page:{curr:1}})}).loading("加载中",2).post()}),e.on("tool(special-offer-table)",function(e){(s={}).act=l.act.reBcSpecialProduct_getInfo,s.id=e.data.id;var t=this;(0,o.echo)().data(s).succ(function(e){(0,d.default)({pid:e,elem:t,table:c})}).loading("加载中",2).post()})})}})},i("body").on("click",".cloned .add-special-offer-btn",function(){(0,d.default)({elem:this,table:c})})}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i,n){Object.defineProperty(t,"__esModule",{value:!0});var l=a(2),o=a(0),r=a(0),d={},s=void 0,c=void 0,u=void 0,f=void 0,m=void 0,p=void 0,b=void 0,y=!1,v="",g=void 0,h=void 0,_=void 0,k=void 0;i("body").on("click",".clone .add-goods-bk",function(){S()}),t.default=function(t){var a=t.id,n={categoryList:[{name:"1",id:"1"}],brandList:[{name:"",id:""}]};layui.use(["upload","form","element","table"],function(){h=layui.upload,_=layui.element,k=layui.table,g=layui.form;var t=new e({el:".c"+a,delimiters:["${{","}}"],data:n,updated:function(){g.render(null,"classification-of-goods-administration-form-s-bk")}});(0,l.echo)().data({act:o.act.bcBespeakCategory_getAllList}).succ(function(e){p=e,t.categoryList=p}).post(),(0,l.echo)().data({act:o.act.bcBrand_bcGetList}).succ(function(e){b=e,t.brandList=b}).post(),(d={}).act=o.act.reBcBespeakProduct_getList,s=k.render({elem:".c"+a+" #goods-management-list-table-bk",url:o.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(d),token:o.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{field:"id",title:"ID",sort:!0,align:"center"},{field:"goodIcon",title:"图片",templet:"#goods-management-list-img-bk",align:"center"},{field:"name",title:"商品名称",align:"center"},{field:"brandName",title:"品牌",align:"center"},{field:"",title:"状态",sort:!0,templet:"#goods-management-list-check-bk",align:"center"},{field:"",title:"操作",toolbar:"#goods-management-list-table-bar-bk"}]],page:!0}),_.on("tab(classification-of-goods-administration-bar-bk)",function(e){if(1==e.index&&y){var t={};t.act=o.act.bcTemplate_getAllList,(0,l.echo)().data(t).succ(function(e){f.data=e}).post()}}),g.on("submit(classification-of-goods-administration-form-s-submit-bk)",function(e){d={},(d=e.field).act=o.act.reBcBespeakProduct_getList,e.field.status1&&e.field.status2?d.status=-1:d.status=e.field.status1||e.field.status2,s.reload({where:{data:JSON.stringify(d),token:o.requestUrl.token},page:{curr:1}})}),g.on("switch(goods-management-list-check-bk)",function(e){var t={};t.act=o.act.reBcBespeakProduct_updateStatus,t.id=this.value,t.status=e.elem.checked?1:0,(0,l.echo)().data(t).post()}),g.on("submit(sku-template-form-submit-bk)",function(e){var t={};y?(t.act=o.act.reBcBespeakProduct_updateSku,t.pid=f.info.id):(t.act=o.act.reBcBespeakProduct_addSku,t.pid=u),t.model=e.field.model;var a=void 0,n=[],r=!1;return i(".sku-table").find(".sku-td").each(function(e,t){(a={}).id=i(t).find("input[name=id]").val(),a.attr=i(t).find("input[name=attr]").val(),a.ref=i(t).find("input[name=ref]").val(),a.stock=i(t).find("input[name=stock]").val(),a.price=i(t).find("input[name=price]").val(),a.dutyFreePrice=i(t).find("input[name=dutyFreePrice]").val(),a.costPrice=i(t).find("input[name=costPrice]").val(),a.limitTime=i(t).find("input[name=limitTime]").val(),a.limitNum=i(t).find("input[name=limitNum]").val(),a.minPurchaseNum=i(t).find("input[name=minPurchaseNum]").val(),a.status=i(t).find("input[name=status]:checked").val()||0,a.img=i(t).find("input[name=sku-img]").val(),a.detailImg=i(t).find("input[name=sku-detail-img]").val(),"true"==a.img&&(a.img="",r=!0),"true"==a.detailImg&&(a.detailImg="",r=!0),n.push(a)}),r?(i.tips("sku图片上传中，请等待上传完成后再提交",3),!1):n.length<1?(i.tips("请添加sku",4),!1):(t.list=n,void(0,l.echo)().data(t).succ(function(e){e&&(y?i.tips("修改成功",3):(i.tips("添加成功",3),_.tabChange("classification-of-goods-administration-bar-bk","classification-of-goods-administration-info-bk"),f.skuData=[]))}).loading("提交中",2).post())}),g.on("submit(product-edit-bk)",function(e){var t=void 0;t=y?o.act.reBcBespeakProduct_updateProduct:o.act.reBcBespeakProduct_addProduct;var a=e.field;if(m=e.field.name,a.info=c.txt.html(),a.act=t,a.categoryIds=[],a.goodIcon=f.info.goodIcon,i(".cloned .layui-form[lay-filter=classification-of-goods-form-bk]").find("input[name=categoryIds]:checked").each(function(e,t){a.categoryIds.push(Number.parseInt(i(t).val()))}),a.categoryIds.length<1)return i.tips("至少选择一个分类",4),!1;var n=!1;return(0,l.echo)().data(a).succ(function(e){if(e){n=!0,u=e.id,f.goodsname=m,y?i.tips("修改成功",3):(i("#goods-main-img-bk").attr("src",""),v="",i.tips("添加成功",3),f.info={}),y||c.txt.html(""),s.reload();var t={};t.act=o.act.bcTemplate_getAllList,(0,l.echo)().data(t).succ(function(e){f.data=e,y||_.tabChange("classification-of-goods-administration-bar-bk","classification-of-goods-administration-model-bk")}).post()}}).loading("上传中",2).async(),n&&!y?(f.info={distributionFee:0},!0):(f.info.categoryIds=a.categoryIds,f.info.brandId=a.brandId,f.info.hotLevel=a.hotLevel,!1)}),k.on("tool(goods-management-list-table-bk)",function(e){(d={}).act=o.act.reBcBespeakProduct_getInfo,d.id=e.data.id,(0,l.echo)().data(d).succ(function(e){S(e)}).post()}),g.render(null,"classification-of-goods-administration-form-s-bk")})};var S=function(t){var a=(new Date).getTime(),d=i(".classification-of-goods-administration-bk-layer-div-clone").clone().find(".clone").addClass("cloned").addClass("l"+a).end().html(),s=layer.open({content:d,title:"商品管理",btn:[],type:1,area:["100%","100%"]});layer.full(s),g.render();var u={data:{},list:[],info:{distributionFee:0},specialList:{},categorys:[],brandList:[],goodsname:"",skuData:[],model:{name:""},hotLevels:[{name:"置顶1",value:1},{name:"置顶2",value:2},{name:"置顶3",value:3,status:1},{name:"热门1",value:4},{name:"热门2",value:5},{name:"热门3",value:6}],goods_edit_btn:"提交进入下一步"};if(t){u.info=t.info;var m=t.skuList;for(var p in m)0!=m[p].limitTime&&(m[p].limitTimelimitNum=function(e){switch(m[p].limitTime){case 1:return"每周";case 2:return"每月";case 3:return"每季";case 4:return"每年";default:return""}}()+"限购"+m[p].limitNum+"件");for(var b in t.skuList)t.skuList[b].percent=0,t.skuList[b].DetialPercent=0;u.skuData=t.skuList,u.model.name=t.model.name,u.goods_edit_btn="提交修改",i(".cloned .sku-title-bk").removeClass("layui-hide"),y=!0}else y=!1;u.data=u.data||{},(0,l.echo)().data({act:o.act.bcBespeakCategory_getAllList}).succ(function(t){u.categorys=t,f=new e({el:".l"+a,delimiters:["${{","}}"],data:u,updated:function(){g.render(null,"classification-of-goods-form-bk"),g.render(null,"sku-template-form-bk")},computed:{categoryList:function(){var e=this.categorys;if(this.info.categoryIds)for(var t in e)for(var a in this.info.categoryIds)e[t].id==this.info.categoryIds[a]&&(e[t].status=1);return e},brandListSelect:function(){var e=this.brandList;if(this.info.brandId)for(var t in e)e[t].id==this.info.brandId&&(e[t].status=1);return e},hotLevelSelect:function(){var e=this.hotLevels,t=!1;if(this.info.hotLevel)for(var a in e)e[a].status=0,e[a].value==this.info.hotLevel&&(e[a].status=1,t=!0);return t||(e[2].status=1),e}}}),(c=new window.wangEditor(".l"+a+" .editor")).customConfig.menus=["head","bold","fontSize","italic","underline","strikeThrough","foreColor","backColor","list","justify","quote","image","table","undo","redo"],c.create(),c.txt.html(u.info.info),(0,l.echo)().data({act:o.act.bcBrand_bcGetList}).succ(function(e){f.brandList=e}).post();h.render({type:1,elem:".l"+a+" #goods-main-img-bk",auto:!1,choose:function(e){var t=void 0;e.pushFile();(0,l.echo)().data({act:o.act.upload_upload}).succ(function(l){if(l){var o=i(".l"+a+" #goods-main-img-view-bk").parents(".layui-upload").find("input")[0].files[0],d={next:function(e){},error:function(e){i.tips("上传过程出现错误，稍后再试",4)},complete:function(e){!1,layer.close(t),f.info.goodIcon=""+r.imgADD.add+v+r.imgADD.productImg}};v=(0,r.uuid)(),n.upload(o,v,l.uploadToken,r.putExtra,r.uploadConfig).subscribe(d),!0,t=i.tips(1),e.preview(function(e,t,n){i(".l"+a+" #goods-main-img-view-bk").attr("src",n)})}else!1}).err(function(){return!1}).post()}});var d=h.render({elem:".l"+a+" #goods-imgs",url:"/upload/",multiple:!0,before:function(e){var t=this.files=e.pushFile();e.preview(function(e,n,l){i(".l"+a+" #goods-imgs-views").append('<img src="'+l+'" alt="'+n.name+'" class="layui-upload-img img-cancle">'),i(".img-cancle").click(function(){delete t[e],d.config.elem.next()[0].value="",i(this).remove()})})},done:function(e){}})}).post()}}).call(this,a(1),a(3),a(5))},function(e,t,a){"use strict";(function(e,i,n){Object.defineProperty(t,"__esModule",{value:!0});var l=a(2),o=a(0),r=a(0),d="";t.default=function(t){var a=t.id,s=t.pid,c=t.table,u={options:[],clazz:{}};s&&(u.clazz=s),layui.use(["form","upload"],function(){var t=new e({el:".c"+a,data:u,delimiters:["${{","}}"],updated:function(){s.render(null,"classification-of-goods-bk-edit-form")}}),s=layui.form,f=layui.upload,m={};m.act=o.act.bcBespeakCategory_getParentList,(0,l.echo)().data(m).succ(function(e){t.options=e}).post(),f.render({elem:".c"+a+" #classification-of-goods-bk-edit-upload",auto:!1,choose:function(e){(0,l.echo)().data({act:o.act.upload_upload}).succ(function(e){if(e){var t=i(".c"+a+" #classification-of-goods-bk-edit-upload-img").parents(".layui-upload").find("input")[0].files[0],l={next:function(e){},error:function(e){i.tips("上传过程出现错误，稍后再试",4)},complete:function(e){!1,layer.closeAll(),i(".c"+a+" #classification-of-goods-bk-edit-upload-img").attr("src",""+r.imgADD.add+d+r.imgADD.brandImg)}};d=(0,r.uuid)(),n.upload(t,d,e.uploadToken,r.putExtra,r.uploadConfig).subscribe(l),!0,i.tips(1)}else!1}).err(function(){return!1}).post()}}),s.on("submit(classification-of-goods-bk-edit)",function(e){var t=void 0,a=void 0;t=e.field;var n=i(e.form).find("#classification-of-goods-bk-edit-upload-img").attr("src");n&&(t.img=n);var r="edit"==i(e.form).attr("flag");r?(t.act=o.act.bcBespeakCategory_update,a="修改"):(t.act=o.act.bcBespeakCategory_add,a="添加");var s=!1;return(0,l.echo)().data(t).succ(function(t){t&&(s=!0,i.tips(a+"成功",3),r||(d="",i(e.form).find("#classification-of-goods-bk-edit-upload-img").attr("src","")),c.reload())}).loading("上传中",2).async(),!r&&s})})}}).call(this,a(1),a(3),a(5))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(2),o=a(0),r=a(4),d=(n=r)&&n.__esModule?n:{default:n};var s=void 0,c={},u=void 0;i("body").on("click",".classification-of-goods-bk-crate-btn",function(){(0,d.default)({elem:this,table:u})}),t.default=function(t){var a=t.id;new e({el:".c"+a,delimiters:["${{","}}"]}),layui.use(["table","form"],function(){s=layui.table;var e=layui.form;c.act=o.act.bcBespeakCategory_getList,u=s.render({elem:".c"+a+" #classification-of-goods-bk",url:o.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(c),token:o.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{checkbox:!0,fixed:!0},{field:"id",title:"id",sort:!0,fixed:!0},{field:"name",title:"名称",sort:!0},{field:"status",title:"状态",sort:!0,templet:"#classification-of-goods-bk-check",unresize:!0},{field:"",title:"操作",toolbar:"#classification-of-goods-bk-bar"}]],page:!0,loading:!0}),e.render(),e.on("submit(classification-bk-table)",function(e){return(c={}).name=e.field.name,c.act=o.act.bcBespeakCategory_getList,e.field.status1&&e.field.status2?c.status=-1:c.status=e.field.status1||e.field.status2,u.reload({where:{data:JSON.stringify(c),token:o.requestUrl.token},page:{curr:1}}),!1}),e.on("switch(classification-of-goods-bk-check)",function(e){var t={};t.act=o.act.bcBespeakCategory_updateStatus,t.id=this.value,t.status=e.elem.checked?1:0,(0,l.echo)().data(t).post()})}),s.on("tool(classification-of-goods-bk)",function(e){(c={}).act=o.act.bcBespeakCategory_getInfo,c.id=e.data.id;var t=this;(0,l.echo)().data(c).succ(function(e){(0,d.default)({pid:e,elem:t,table:u})}).loading("加载中",2).post()})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(0),o=a(2),r=a(4),d=(n=r)&&n.__esModule?n:{default:n};var s={},c=void 0;i("body").on("click",".cloned .bran-crate-btn",function(){(0,d.default)({elem:this,table:c})}),t.default=function(t){var a=t.id;new e({el:".c"+a,delimiters:["${{","}}"]}),layui.use(["table","form"],function(){var e=layui.table,t=layui.form;s.act=l.act.bcBrand_getList,c=e.render({elem:".c"+a+" #brand-list-div-table",url:l.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(s),token:l.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{field:"id",title:"ID",sort:!0,fixed:"left"},{field:"name",title:"品牌名称"},{field:"priority",title:"优先级",sort:!0},{field:"status",title:"状态",templet:"#brand-list-check",unresize:!0},{field:"",title:"操作",toolbar:"#brand-list-bar"}]],page:!0}),t.render(),t.on("switch(brand-list-check)",function(e){var t={};t.act=l.act.bcBrand_updateStatus,t.id=this.value,t.status=e.elem.checked?1:0,(0,o.echo)().data(t).post()}),t.on("submit(brand-list-div-table)",function(e){var t=void 0;return(t=e.field).act=l.act.bcBrand_getList,c.reload({where:{data:JSON.stringify(t),token:l.requestUrl.token},page:{curr:1}}),!1}),e.on("tool(brand-list-div-table)",function(e){(0,d.default)({pid:e.data,elem:this,table:c})})})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(0),o=a(4),r=(n=o)&&n.__esModule?n:{default:n},d=a(2);var s=void 0,c=void 0;t.default=function(t){var a=t.id;new e({el:".c"+a,delimiters:["${{","}}"]}),layui.use(["table","form"],function(){var e=layui.table,t=layui.form;(s={}).act=l.act.bcCustomer_getList,c=e.render({elem:".c"+a+" .purchasing-agent-management-table",url:l.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(s),token:l.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{checkbox:!0,fixed:!0},{field:"id",title:"ID",sort:!0,fixed:!0},{field:"nickname",title:"姓名"},{field:"email",title:"Email"},{field:"username",title:"手机"},{field:"",title:"状态",templet:"#purchasing-agent-management-table-check",unresize:!0},{field:"",title:"操作",toolbar:"#purchasing-agent-management-table-bar"}]],page:!0,height:"full"}),t.render(null,"purchasing-agent-management-form"),t.on("checkbox(model)",function(e){i(e.elem).parents(".add-selected-option").find(".layui-form-checked").length<1?(i(e.othis).click(),layer.msg("至少选择一个",{icon:6})):creatTable()}),t.on("submit(purchasing-agent-management-form-submit)",function(e){return s.name=e.field.name,s.phone=e.field.phone,s.act=l.act.bcCustomer_getList,e.field.status1&&e.field.status2?s.status=-1:s.status=e.field.status1||e.field.status2,c.reload({where:{data:JSON.stringify(s),token:l.requestUrl.token}}),!1}),e.on("tool(purchasing-agent-management-table)",function(e){(s={}).act=l.act.bcCustomer_getInfo,s.id=e.data.id;var t=this;(0,d.echo)().data(s).succ(function(e){e&&(0,r.default)({pid:e,elem:t,table:c})}).loading("加载中",2).post()}),t.on("switch(purchasing-agent-management-table-check)",function(e){(s={}).act=l.act.bcCustomer_updateStatus,s.id=this.value,s.status=e.elem.checked?1:0,(0,d.echo)().data(s).post()})})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i,n){Object.defineProperty(t,"__esModule",{value:!0});var l=a(2),o=a(0),r=a(0);t.default=function(t){var a=!1,d="",s=t.id,c=t.pid,u=t.table,f={options:[],clazz:{}};c&&(f.clazz=c),layui.use(["form","upload"],function(){var t=new e({el:".c"+s,data:f,delimiters:["${{","}}"],updated:function(){c.render(null,"classification-of-goods-edit-form")}}),c=layui.form,m=layui.upload,p={};p.act=o.act.bcCategory_getParentList,(0,l.echo)().data(p).succ(function(e){t.options=e}).post(),m.render({elem:".c"+s+" #classification-of-goods-edit-upload",auto:!1,choose:function(e){(0,l.echo)().data({act:o.act.upload_upload}).succ(function(e){if(e){var t=i(".c"+s+" #classification-of-goods-edit-upload-img").parents(".layui-upload").find("input")[0].files[0],l={next:function(e){},error:function(e){i.tips("上传过程出现错误，稍后再试",4)},complete:function(e){a=!1,layer.closeAll(),i(".c"+s+" #classification-of-goods-edit-upload-img").attr("src",""+r.imgADD.add+d+r.imgADD.brandImg)}};d=(0,r.uuid)(),n.upload(t,d,e.uploadToken,r.putExtra,r.uploadConfig).subscribe(l),a=!0,i.tips(1)}else a=!1}).err(function(){return a=!1}).post()}}),c.on("submit(classification-of-goods-edit)",function(e){a&&i.tips("正在上传图片中，请等图片上传结束后再提交",3);var t=void 0,n=e.field,r=i(e.form).find("#classification-of-goods-edit-upload-img").attr("src");r&&(n.img=r);var s="edit"==i(e.form).attr("flag");s?(n.act=o.act.bcCategory_update,t="修改"):(n.act=o.act.bcCategory_add,t="添加");var c=!1;return(0,l.echo)().data(n).succ(function(a){a&&(c=!0,i.tips(t+"成功",3),s||(d="",i(e.form).find("#classification-of-goods-edit-upload-img").attr("src","")),u.reload())}).loading("上传中",2).async(),!s&&c})})}}).call(this,a(1),a(3),a(5))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(0),o=a(4),r=(n=o)&&n.__esModule?n:{default:n},d=a(2);var s=void 0,c=void 0;t.default=function(t){var a=t.id;new e({el:".c"+a,delimiters:["${{","}}"]}),(s={}).act=l.act.bcBanner_getList,layui.use(["table","form"],function(){var e=layui.table,t=layui.form;c=e.render({elem:".c"+a+" .index-banner-management-table",url:l.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(s),token:l.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{checkbox:!0,fixed:!0},{field:"id",title:"ID",sort:!0,fixed:!0},{field:"img",title:"图片",templet:"#index-banner-management-table-img"},{field:"title",title:"标题"},{field:"url",title:"链接"},{field:"priority",title:"排序"},{field:"status",title:"状态",templet:"#index-banner-management-table-check",unresize:!0},{field:"",title:"操作",toolbar:"#index-banner-management-table-bar"}]],page:!0,height:"full"}),e.on("tool(index-banner-management-table)",function(e){(0,r.default)({pid:e.data,elem:this,table:c})}),t.on("switch(index-banner-management-table-check)",function(e){var t={};t.act=l.act.bcBanner_updateStatus,t.id=this.value,t.status=e.elem.checked?1:0,(0,d.echo)().data(t).post()})})},i("body").on("click",".add-banner-btn",function(){(0,r.default)({elem:this,table:c})})}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(0),o=a(2),r=a(4);(n=r)&&n.__esModule;var d=void 0,s=void 0,c=void 0,u=void 0,f=void 0;t.default=function(t){layui.use(["upload","form","element","table","laydate"],function(){u=layui.form;var a=t.id;f=t.table;var n=new e({el:".c"+a,delimiters:["${{","}}"],data:t.pid,methods:{updateAdd:function(){(0,o.echo)().data({act:l.act.address_getProvinces}).succ(function(e){e&&(0,l.openModifyAdd)({province:e,form:layui.form,layFilter:"modify-add-submit"})}).loading().post()},openYundan:function(){var e=this;(0,l.openYunDan)({form:layui.form,succ:function(t,a){(0,o.echo)().data({act:l.act.bcOrder_batchDelivery,orderSns:[e.orderSn],code:t,deliverySn:a,update:1}).succ(function(t){t&&(e.deliverySn=a,e.deliveryList=t.deliveryList)}).loading().post()}})}}});s=layui.table;var r=void 0;r="pendingDelivery"==t.pid.orderStatus?[[{field:"brandName",title:"品牌"},{field:"productName",title:"商品名称",width:"30%"},{field:"attr",title:"型号"},{field:"ref",title:"REF"},{field:"num",title:"数量"},{field:"refundNum",title:"已退数量"},{field:"productPrice",title:"单价（元）"},{field:"total",title:"总价（元）"},{title:"操作",toolbar:"#order-detail-table-bar"}]]:[[{field:"brandName",title:"品牌"},{field:"productName",title:"商品名称",width:"30%"},{field:"attr",title:"型号"},{field:"ref",title:"REF"},{field:"num",title:"数量"},{field:"refundNum",title:"已退数量"},{field:"productPrice",title:"单价（元）"},{field:"total",title:"总价（元）"}]],d=s.render({elem:".c"+a+" #order-detail-table",url:"",cols:r,id:"goods-management-list-table",page:!0,data:t.pid.items}),s.on("tool(order-detail-table)",function(e){var t=e.data;(0,l.openRefund)({form:u,num:t.num-t.refundNum,succ:function(e,a){(0,o.echo)().data({act:l.act.bcOrder_refund,orderSn:n.orderSn,pid:t.productId,skuId:t.skuId,num:e,remark:a}).succ(function(e){e&&(0,o.echo)().data({act:l.act.bcOrder_getInfo,orderSn:n.orderSn}).succ(function(e){e&&(d.reload({data:e.items}),i.tips("退款申请成功",3))}).loading().post()}).loading().post()}})}),u.on("submit(modify-add-submit)",function(e){return(c=e.field).orderSn=t.pid.orderSn,c.act=l.act.bcOrder_updateAddress,(0,o.echo)().data(c).succ(function(t){t&&(i.tips("成功",3),n.address=e.field,f.reload())}).post(),!1}),u.on("select(modify-add-province-city-area)",function(e){var t=void 0,a=i(e.elem),n=a.attr("name");switch(c={},n){case"province":c.act=l.act.address_getCitiesByProvince,t=1,c.provinceCode=a.find("option[value="+e.value+"]").attr("code");break;case"city":c.act=l.act.address_getAreasByCity,t=2,c.cityCode=a.find("option[value="+e.value+"]").attr("code");break;default:return!1}(0,o.echo)().data(c).succ(function(e){var i="<option disabled selected>请选择</option>";for(var n in e)i+="<option code='"+e[n].code+"' value=\""+e[n].name+'">'+e[n].name+"</option>";1==t?(a.parents(".province-city-area").find("select[name=city]").html(i),a.parents(".province-city-area").find("select[name=area]").html("<option disabled selected>请选择</option>")):a.parents(".province-city-area").find("select[name=area]").html(i),u.render("select","modify-add-form")}).post()})})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i,n){Object.defineProperty(t,"__esModule",{value:!0});var l=a(2),o=a(0),r=a(0),d={},s=void 0,c=void 0,u=void 0,f=void 0,m=void 0,p=void 0,b=void 0,y=!1,v="",g=void 0,h=void 0,_=void 0,k=void 0;i("body").on("click",".clone .add-goods",function(){S()}),t.default=function(t){var a=t.id,n={categoryList:[{name:"1",id:"1"}],brandList:[{name:"",id:""}]};layui.use(["upload","form","element","table"],function(){h=layui.upload,_=layui.element,k=layui.table,g=layui.form;var t=new e({el:".c"+a,delimiters:["${{","}}"],data:n,updated:function(){g.render(null,"classification-of-goods-administration-form-s")}});(0,l.echo)().data({act:o.act.bcCategory_getAllList}).succ(function(e){e&&(p=e,t.categoryList=p)}).post(),(0,l.echo)().data({act:o.act.bcBrand_bcGetList}).succ(function(e){e&&(b=e,t.brandList=b)}).post(),(d={}).act=o.act.reBcProduct_getList,s=k.render({elem:".c"+a+" #goods-management-list-table",url:o.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(d),token:o.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{field:"id",title:"ID",sort:!0,align:"center"},{field:"goodIcon",title:"图片",templet:"#goods-management-list-img",align:"center"},{field:"name",title:"商品名称",align:"center"},{field:"brandName",title:"品牌",align:"center"},{field:"",title:"状态",sort:!0,templet:"#goods-management-list-check",align:"center"},{field:"",title:"操作",toolbar:"#goods-management-list-table-bar"}]],id:"checked}",page:!0}),_.on("tab(classification-of-goods-administration-bar)",function(e){if(1==e.index&&y){var t={};t.act=o.act.bcTemplate_getAllList,(0,l.echo)().data(t).succ(function(e){f.data=e}).post()}}),g.on("submit(classification-of-goods-administration-form-s-submit)",function(e){d={},(d=e.field).act=o.act.reBcProduct_getList,e.field.status1&&e.field.status2?d.status=-1:d.status=e.field.status1||e.field.status2,s.reload({where:{data:JSON.stringify(d),token:o.requestUrl.token},page:{curr:1}})}),g.on("switch(goods-management-list-check)",function(e){var t={};t.act=o.act.reBcProduct_updateStatus,t.id=this.value,t.status=e.elem.checked?1:0,(0,l.echo)().data(t).post()}),g.on("submit(sku-template-form-submit)",function(e){var t={};y?(t.act=o.act.reBcProduct_updateSku,t.pid=f.info.id):(t.act=o.act.reBcProduct_addSku,t.pid=u),t.model=e.field.model;var a=void 0,n=[],r=!1;return i(".sku-table").find(".sku-td").each(function(e,t){(a={}).id=i(t).find("input[name=id]").val(),a.attr=i(t).find("input[name=attr]").val(),a.ref=i(t).find("input[name=ref]").val(),a.stock=i(t).find("input[name=stock]").val(),a.price=i(t).find("input[name=price]").val(),a.dutyFreePrice=i(t).find("input[name=dutyFreePrice]").val(),a.costPrice=i(t).find("input[name=costPrice]").val(),a.limitTime=i(t).find("input[name=limitTime]").val(),a.limitNum=i(t).find("input[name=limitNum]").val(),a.minPurchaseNum=i(t).find("input[name=minPurchaseNum]").val(),a.status=i(t).find("input[name=status]:checked").val()||0,a.img=i(t).find("input[name=sku-img]").val(),a.detailImg=i(t).find("input[name=sku-detail-img]").val(),"true"==a.img&&(a.img="",r=!0),"true"==a.detailImg&&(a.detailImg="",r=!0),n.push(a)}),r?(i.tips("sku图片上传中，请等待上传完成后再提交",3),!1):n.length<1?(i.tips("请添加sku",4),!1):(t.list=n,void(0,l.echo)().data(t).succ(function(e){e&&(y?i.tips("修改成功",3):(i.tips("添加成功",3),_.tabChange("classification-of-goods-administration-bar","classification-of-goods-administration-info"),f.skuData=[]))}).loading("提交中",2).post())}),g.on("submit(product-edit)",function(e){var t=void 0;t=y?o.act.reBcProduct_updateProduct:o.act.reBcProduct_addProduct;var a=e.field;if(a.goodIcon=f.info.goodIcon,m=e.field.name,a.info=c.txt.html(),a.act=t,a.categoryIds=[],i(".cloned .layui-form[lay-filter=classification-of-goods-form]").find("input[name=categoryIds]:checked").each(function(e,t){a.categoryIds.push(Number.parseInt(i(t).val()))}),a.categoryIds.length<1)return i.tips("至少选择一个分类",4),!1;var n=!1;return(0,l.echo)().data(a).succ(function(e){if(e){n=!0,u=e.id,f.goodsname=m,y?i.tips("修改成功",3):(i("#goods-main-img-view").attr("src",""),v="",f.info={},i.tips("添加成功",3)),y||c.txt.html(""),s.reload();var t={};t.act=o.act.bcTemplate_getAllList,(0,l.echo)().data(t).succ(function(e){f.data=e,y||_.tabChange("classification-of-goods-administration-bar","classification-of-goods-administration-model")}).post()}}).loading("上传中",2).async(),n&&!y?(f.info={distributionFee:0},!0):(f.info.categoryIds=a.categoryIds,f.info.brandId=a.brandId,f.info.hotLevel=a.hotLevel,!1)}),k.on("tool(goods-management-list-table)",function(e){(d={}).act=o.act.reBcProduct_getInfo,d.id=e.data.id,(0,l.echo)().data(d).succ(function(e){S(e)}).post()}),g.render(null,"classification-of-goods-administration-form-s")})};var S=function(t){var a=(new Date).getTime(),d=i(".classification-of-goods-administration-layer-div-clone").clone().find(".clone").addClass("cloned").addClass("l"+a).end().html(),s=layer.open({content:d,title:"商品管理",btn:[],type:1,area:["100%","100%"]});layer.full(s),g.render();var u={data:{},list:[],info:{distributionFee:0},specialList:{},categorys:[],brandList:[],goodsname:"",skuData:[],model:{name:""},hotLevels:[{name:"置顶1",value:1},{name:"置顶2",value:2},{name:"置顶3",value:3,status:1},{name:"热门1",value:4},{name:"热门2",value:5},{name:"热门3",value:6}],goods_edit_btn:"提交进入下一步"};if(t){u.info=t.info;var m=t.skuList;for(var p in m)0!=m[p].limitTime&&(m[p].limitTimelimitNum=function(e){switch(m[p].limitTime){case 1:return"每周";case 2:return"每月";case 3:return"每季";case 4:return"每年";default:return""}}()+"限购"+m[p].limitNum+"件");for(var b in t.skuList)t.skuList[b].percent=0,t.skuList[b].DetialPercent=0;u.skuData=t.skuList,u.model.name=t.model.name,u.goods_edit_btn="提交修改",i(".cloned .sku-title").removeClass("layui-hide"),y=!0}else y=!1;u.data=u.data||{},(0,l.echo)().data({act:o.act.bcCategory_getAllList}).succ(function(t){u.categorys=t,f=new e({el:".l"+a,delimiters:["${{","}}"],data:u,updated:function(){g.render(null,"classification-of-goods-form"),g.render(null,"sku-template-form")},computed:{categoryList:function(){var e=this.categorys;if(this.info.categoryIds)for(var t in e)for(var a in this.info.categoryIds)e[t].id==this.info.categoryIds[a]&&(e[t].status=1);return e},brandListSelect:function(){var e=this.brandList;if(this.info.brandId)for(var t in e)e[t].id==this.info.brandId&&(e[t].status=1);return e},hotLevelSelect:function(){var e=this.hotLevels,t=!1;if(this.info.hotLevel)for(var a in e)e[a].status=0,e[a].value==this.info.hotLevel&&(e[a].status=1,t=!0);return t||(e[2].status=1),e}}}),(c=new window.wangEditor(".l"+a+" .editor")).customConfig.menus=["head","bold","fontSize","italic","underline","strikeThrough","foreColor","backColor","list","justify","quote","image","table","undo","redo"],c.create(),c.txt.html(u.info.info),(0,l.echo)().data({act:o.act.bcBrand_bcGetList}).succ(function(e){f.brandList=e}).post();h.render({type:1,elem:".l"+a+" #goods-main-img",auto:!1,choose:function(e){var t=void 0;e.pushFile();(0,l.echo)().data({act:o.act.upload_upload}).succ(function(l){if(l){var o=i(".l"+a+" #goods-main-img-view").parents(".layui-upload").find("input")[0].files[0],d={next:function(e){},error:function(e){i.tips("上传过程出现错误，稍后再试",4),layer.close(t)},complete:function(e){!1,layer.close(t),f.info.goodIcon=""+r.imgADD.add+v+r.imgADD.productImg}};v=(0,r.uuid)(),n.upload(o,v,l.uploadToken,r.putExtra,r.uploadConfig).subscribe(d),!0,t=i.tips(1),e.preview(function(e,t,n){i(".l"+a+" #goods-main-img-view").attr("src",n)})}else!1}).err(function(){return!1}).post()}});var d=h.render({elem:".l"+a+" #goods-imgs",url:"/upload/",multiple:!0,before:function(e){var t=this.files=e.pushFile();e.preview(function(e,n,l){i(".l"+a+" #goods-imgs-views").append('<img src="'+l+'" alt="'+n.name+'" class="layui-upload-img img-cancle">'),i(".img-cancle").click(function(){delete t[e],d.config.elem.next()[0].value="",i(this).remove()})})},done:function(e){}})}).post()}}).call(this,a(1),a(3),a(5))},function(e,t,a){"use strict";(function(e,i,n){Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),o=a(2),r=void 0,d="",s="";t.default=function(t){var a=t.id,c=t.table,u=t.pid;new e({el:".c"+a,delimiters:["${{","}}"],data:u,updated:function(){}}),layui.use(["form","upload"],function(){var e=layui.form,t=layui.upload;e.render(null,"purchasing-agent-management-add-form"),t.render({elem:".c"+a+" #positive-photo",auto:!1,choose:function(e){(0,o.echo)().data({act:l.act.upload_upload}).succ(function(t){if(t){var a=i("#positive-photo-img").parents(".layui-upload").find("input")[0].files[0],o={next:function(e){},error:function(e){i.tips("上传过程出现错误，稍后再试",4)},complete:function(e){isuploading=!1,layer.closeAll()}};d=(0,l.uuid)(),n.upload(a,d,t.uploadToken,l.putExtra,l.uploadConfig).subscribe(o),isuploading=!0,i.tips(1),e.preview(function(e,t,a){i("#positive-photo-img").attr("src",a)})}else isuploading=!1}).err(function(){return isuploading=!1}).post()}}),t.render({elem:".c"+a+" #reverse-photo",auto:!1,choose:function(e){(0,o.echo)().data({act:l.act.upload_upload}).succ(function(t){if(t){var a=i("#reverse-photo-img").parents(".layui-upload").find("input")[0].files[0],o={next:function(e){},error:function(e){i.tips("上传过程出现错误，稍后再试",4)},complete:function(e){isuploading=!1,layer.closeAll()}};s=(0,l.uuid)(),n.upload(a,s,t.uploadToken,l.putExtra,l.uploadConfig).subscribe(o),isuploading=!0,i.tips(1),e.preview(function(e,t,a){i("#reverse-photo-img").attr("src",a)})}else isuploading=!1}).err(function(){return isuploading=!1}).post()}}),e.on("submit(purchasing-agent-management-form-submit)",function(e){return(r=e.field).act=l.act.bcCustomer_update,d&&(r.positiveImg=""+l.imgADD.add+d+l.imgADD.idcard),s&&(r.oppositeImg=""+l.imgADD.add+s+l.imgADD.idcard),(0,o.echo)().data(r).succ(function(e){e&&(i.tips("修改成功",3),c.reload())}).loading("提交中",2).post(),!1}),e.on("submit(purchasing-agent-management-add-form-submit)",function(e){return(r=e.field).act=l.act.bcAddress_update,(0,o.echo)().data(r).succ(function(e){e&&i.tips("修改成功",3)}).loading("提交中",2).post(),!1}),e.on("select(province-city-area)",function(t){var a=void 0,n=i(t.elem),d=n.attr("name");switch(r={},d){case"province":r.act=l.act.address_getCitiesByProvince,a=1,r.provinceCode=n.find("option[value="+t.value+"]").attr("code");break;case"city":r.act=l.act.address_getAreasByCity,a=2,r.cityCode=n.find("option[value="+t.value+"]").attr("code");break;default:return!1}(0,o.echo)().data(r).succ(function(t){var i="<option disabled selected>请选择</option>";for(var l in t)i+="<option code='"+t[l].code+"' value=\""+t[l].name+'">'+t[l].name+"</option>";1==a?(n.parents(".province-city-area").find("select[name=city]").html(i),n.parents(".province-city-area").find("select[name=area]").html("<option disabled selected>请选择</option>")):n.parents(".province-city-area").find("select[name=area]").html(i),e.render("select","purchasing-agent-management-add-form")}).post()})})}}).call(this,a(1),a(3),a(5))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(2),o=a(0),r=a(4),d=(n=r)&&n.__esModule?n:{default:n};var s=void 0,c={},u=void 0;i("body").on("click",".classification-of-goods-crate-btn",function(){(0,d.default)({elem:this,table:u})}),t.default=function(t){var a=t.id;new e({el:".c"+a,delimiters:["${{","}}"]}),layui.use(["table","form"],function(){s=layui.table;var e=layui.form;c.act=o.act.bcCategory_getList,u=s.render({elem:".c"+a+" #classification_of_goods",url:o.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(c),token:o.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{checkbox:!0,fixed:!0},{field:"id",title:"id",sort:!0,fixed:!0},{field:"name",title:"名称",sort:!0},{field:"status",title:"状态",sort:!0,templet:"#classification_of_goods_check",unresize:!0},{field:"",title:"操作",toolbar:"#classification_of_goods_bar"}]],page:!0,id:"classification_of_goods",loading:!0}),e.render(),e.on("submit(classification-table)",function(e){return(c={}).name=e.field.name,c.act=o.act.bcCategory_getList,e.field.status1&&e.field.status2?c.status=-1:c.status=e.field.status1||e.field.status2,s.reload("classification_of_goods",{where:{data:JSON.stringify(c),token:o.requestUrl.token},page:{curr:1}}),!1}),e.on("switch(classification_of_goods_check)",function(e){var t={};t.act=o.act.bcCategory_updateStatus,t.id=this.value,t.status=e.elem.checked?1:0,(0,l.echo)().data(t).post()})}),s.on("tool(classification_of_goods)",function(e){(c={}).act=o.act.bcCategory_getInfo,c.id=e.data.id;var t=this;(0,l.echo)().data(c).succ(function(e){(0,d.default)({pid:e,elem:t,table:u})}).loading("加载中",2).post()})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i,n){Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),o=a(2),r=void 0,d="";t.default=function(t){var a={data:{id:"",name:"",priority:"",status:1,type:1,img:""}},s=t.id,c=t.pid,u=t.table;c&&(a.data=c);new e({el:".c"+s,delimiters:["${{","}}"],data:a,updated:function(){}});layui.use(["upload","table","form"],function(){var e=layui.upload,t=layui.form;e.render({elem:".c"+s+" #brand-main-img",auto:!1,choose:function(e){(0,o.echo)().data({act:l.act.upload_upload}).succ(function(e){if(e){var t=i(".c"+s+" #brand-main-img-view").parents(".layui-upload").find("input")[0].files[0],a={next:function(e){},error:function(e){i.tips("上传过程出现错误，稍后再试",4)},complete:function(e){!1,layer.closeAll(),i(".c"+s+" #brand-main-img-view").attr("src",""+l.imgADD.add+d+l.imgADD.brandImg)}};d=(0,l.uuid)(),n.upload(t,d,e.uploadToken,l.putExtra,l.uploadConfig).subscribe(a),!0,i.tips(1)}else!1}).err(function(){return!1}).post()}}),t.render(),t.on("submit(brand-management-submit)",function(e){(r=e.field).act=l.act.bcBrand_add;var t=i(e.form).find("#brand-main-img-view").attr("src");t&&(r.img=t);var a=!1,n="",s="edit"==i(e.form).attr("flag");return s?(r.act=l.act.bcBrand_update,n="修改"):(r.act=l.act.bcBrand_add,n="添加"),(0,o.echo)().data(r).loading("保存中",2).succ(function(t){t&&(a=!0,i.tips(n+"成功",3),s||(d="",i(e.form).find("#brand-main-img-view").attr("src","")),u.reload())}).async(),!s&&a})})}}).call(this,a(1),a(3),a(5))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(0),o=a(2),r=a(4),d=(n=r)&&n.__esModule?n:{default:n};var s=void 0,c=void 0,u=void 0,f=void 0;i(function(){}),t.default=function(t){var a=t.id;new e({el:".c"+a,delimiters:["${{","}}"]}),layui.use(["upload","form","element","table","laydate"],function(){var e=layui.laydate,t=layui.form;t.render(null,"stock-order-search-form"),e.render({elem:".c"+a+" .order-start",type:"datetime"}),e.render({elem:".c"+a+" .order-end",type:"datetime"}),u={act:l.act.bcOrder_getList},s=layui.table,c=s.render({elem:".c"+a+" #stock-order-list-table",url:l.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(u),token:l.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{checkbox:!0,fixed:!0},{field:"orderSn",title:"订单号",sort:!0,fixed:!0},{field:"phone",title:"客户手机"},{field:"orderStatus",title:"状态"},{field:"",title:"商品清单",toolbar:"#stock-order-list-table-items"},{field:"address",title:"地址"},{field:"",title:"操作",width:270,toolbar:"#stock-order-list-table-bar1"}]],id:".c"+a+"stock-order-list-table",page:!0}),t.on("submit(stock-order-search-form-submit)",function(e){f=e.field.orderStatus,(u=e.field).act=l.act.bcOrder_getList,c.reload({where:{data:JSON.stringify(u),token:l.requestUrl.token},page:{curr:1}})}),t.on("submit(waybill-number-submit)",function(e){if("pendingDelivery"==f||"delivered"==f||"complete"==f){var n=s.checkStatus(".c"+a+"stock-order-list-table").data;if(n.length<1)i.tips("请至少选择一个",4);else{var r=[];for(var d in n)r.push(n[d].orderSn);(0,l.openYunDan)({form:t,succ:function(e,t){(0,o.echo)().data({act:l.act.bcOrder_batchDelivery,orderSns:r,code:e,deliverySn:t}).succ(function(e){e&&c.reload()}).loading().post()}})}}else i.tips("请筛选订单后再操作",4);return!1}),s.on("tool(stock-order-list-table)",function(e){var a=this,i=e.event,n=e.data;switch(i){case"order-detail":(0,l.openTable)(n.items);break;case"waybill-number":(0,l.openYunDan)({form:t,orderSn:n.orderSn,yundanInfoAct:l.act.bcOrder_getDelivery,succ:function(e,t){(0,o.echo)().data({act:l.act.bcOrder_batchDelivery,orderSns:[n.orderSn],code:e,deliverySn:t}).succ(function(e){e&&c.reload()}).loading().post()}});break;case"refund":layer.prompt({formType:0,title:"请输入退款原因"},function(e,t,a){layer.close(t)});break;case"cancel":layer.prompt({formType:0,title:"请输入取消原因"},function(e,t,a){u={act:l.act.bcOrder_cancel,orderSn:n.orderSn,remark:e},(0,o.echo)().data(u).succ(function(e){e&&c.reload()}).loading().post(),layer.close(t)});break;case"edit":u={act:l.act.bcOrder_getInfo,orderSn:n.orderSn},(0,o.echo)().data(u).succ(function(e){e&&(0,d.default)({pid:e,elem:a,table:c})}).loading().post()}})})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0});a(function(){a("body").on("click","#logout",function(){layer.confirm("确定要退出登录吗?",{icon:3,title:"提示"},function(e){localStorage.removeItem("token"),a.tips("退出成功",3),setTimeout(function(){location.reload()},1300),layer.close(e)})})}),t.default=function(t){var a=t.id,i=new e({el:".c"+a,data:{orderNum:0,orderNowNum:0,sailNum:0,customerNum:0,orderNumTweend:0,orderNowTweend:0,sailNumTweend:0,customerNumTweend:0},delimiters:["${{","}}"],computed:{animatedOrderNum:function(){return this.orderNumTweend.toFixed(0)},animatedSailNum:function(){return"￥"+this.sailNumTweend.toFixed(0)},animatedCustomerNum:function(){return this.customerNumTweend.toFixed(0)},animatedNowOrderNum:function(){return this.orderNowTweend.toFixed(0)}},watch:{orderNum:function(e){TweenLite.to(this.$data,.5,{orderNumTweend:e})},orderNowNum:function(e){TweenLite.to(this.$data,.7,{orderNowTweend:e})},sailNum:function(e){TweenLite.to(this.$data,1,{sailNumTweend:e})},customerNum:function(e){TweenLite.to(this.$data,1.5,{customerNumTweend:e})}}});i.$data.orderNum=1200,i.$data.sailNum=19909900,i.$data.customerNum=12230,i.$data.orderNowNum=123,layui.use("table",function(){layui.table.render({elem:".c"+a+" #order-list",url:"",cols:[[{checkbox:!0,fixed:!0},{field:"id",title:"订单号",sort:!0,fixed:!0},{field:"username",title:"客户名称"},{field:"sex",title:"状态",sort:!0},{field:"city",title:"生成日期",sort:!0},{field:"sign",title:"金额",sort:!0},{field:"",title:"操作",toolbar:"#order-list_bar"}]],height:"full",data:[{id:"10001",username:"杜甫",email:"xianxin@layui.com",sex:"成交",city:"2018-03-06",sign:"100",experience:"116",ip:"192.168.0.8",logins:"108",joinTime:"2016-10-14"},{id:"10002",username:"李白",email:"xianxin@layui.com",sex:"成交",city:"2018-03-06",sign:"100",experience:"12",ip:"192.168.0.8",logins:"106",joinTime:"2016-10-14",LAY_CHECKED:!0},{id:"10003",username:"王勃",email:"xianxin@layui.com",sex:"成交",city:"2018-03-06",sign:"100",experience:"65",ip:"192.168.0.8",logins:"106",joinTime:"2016-10-14"},{id:"10004",username:"贤心",email:"xianxin@layui.com",sex:"成交",city:"2018-03-06",sign:"100",experience:"666",ip:"192.168.0.8",logins:"106",joinTime:"2016-10-14"},{id:"10005",username:"贤心",email:"xianxin@layui.com",sex:"成交",city:"2018-03-06",sign:"100",experience:"86",ip:"192.168.0.8",logins:"106",joinTime:"2016-10-14"},{id:"10006",username:"贤心",email:"xianxin@layui.com",sex:"成交",city:"2018-03-06",sign:"100",experience:"12",ip:"192.168.0.8",logins:"106",joinTime:"2016-10-14"},{id:"10007",username:"贤心",email:"xianxin@layui.com",sex:"成交",city:"2018-03-06",sign:"100",experience:"16",ip:"192.168.0.8",logins:"106",joinTime:"2016-10-14"},{id:"10008",username:"贤心",email:"xianxin@layui.com",sex:"成交",city:"2018-03-06",sign:"100",experience:"106",ip:"192.168.0.8",logins:"106",joinTime:"2016-10-14"}]})})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(0),o=a(4),r=(n=o)&&n.__esModule?n:{default:n},d=a(2);var s=void 0,c=void 0,u={};t.default=function(t){var a=t.id;new e({el:".c"+a,delimiters:["${{","}}"]}),layui.use(["table","form"],function(){c=layui.table;var e=layui.form;u.act=l.act.bcTemplate_getList,s=c.render({elem:".c"+a+" #classification-of-classification-goods",url:l.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(u),token:l.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{field:"id",title:"ID",sort:!0,fixed:"left"},{field:"name",title:"模板名称"},{field:"list",title:"子名称",templet:"#classification-of-goods-classification-son",unresize:!0},{field:"status",title:"状态",templet:"#classification-of-goods-classification-check",unresize:!0},{field:"",title:"操作",toolbar:"#classification-of-goods-classification-bar"}]],page:!0,id:"classification_of_goods_classification"}),c.on("tool(classification-of-classification-goods)",function(e){(0,r.default)({pid:e.data,elem:this,table:s})}),e.on("switch(classification-of-goods-classification-check)",function(e){var t={};t.act=l.act.bcTemplate_updateStatus,t.id=this.value,t.status=e.elem.checked?1:0,(0,d.echo)().data(t).post()})})},i(function(){i("body").on("click",".cloned  .new-model",function(){(0,r.default)({elem:this,table:s})})})}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),l=a(2),o=void 0;t.default=function(t){var a={data:{status:1},actType:{},type:n.requestUrl.type},r=t.id,d=t.pid,s=t.table,c=t.type;a.actType=c,d&&(a.data=d),new e({el:".c"+r,delimiters:["${{","}}"],data:a}),layui.use(["form"],function(){var e=layui.form;e.render(null,"admin-edit-form"),e.on("submit(admin-edit-form-submit)",function(e){if("add"==c){var t=[];if(i(".admin-edit-form input[name=password]").each(function(e,a){t.push(i(a).val())}),t[0]!=t[1])return void i.tips("两次输入的密码不一样！",4)}var a=void 0;o=e.field,d?(o.act=n.act.bcPurchase_update,a="修改"):(o.act=n.act.bcPurchase_add,a="添加");var r=!1;return(0,l.echo)().data(o).succ(function(e){e&&(r=!0,i.tips(a+"成功",3),s.reload())}).loading("上传中",2).async(),!d&&r})})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n,l=a(4),o=(n=l)&&n.__esModule?n:{default:n},r=a(0),d=a(2);var s=void 0,c=void 0;t.default=function(t){var a=t.id;new e({el:".c"+a,delimiters:["${{","}}"]}),(c={}).act=r.act.bcPurchase_getList,layui.use(["table","form"],function(){var e=layui.table,t=layui.form;s=e.render({elem:".c"+a+" .admin-management-table",url:r.requestUrl.mainUrl,method:"post",where:{data:JSON.stringify(c),token:r.requestUrl.token},response:{statusName:"code",statusCode:200,msgName:"message",countName:"total",dataName:"datalist"},cols:[[{checkbox:!0,fixed:!0},{field:"id",title:"ID",sort:!0,fixed:!0},{field:"nickname",title:"管理员姓名"},{field:"phone",title:"手机号码"},{field:"username",title:"账号"},{field:"type",title:"权限",templet:"#admin-management-table-type"},{field:"status",title:"状态",templet:"#admin-management-table-check"},{field:"",title:"操作",toolbar:"#admin-management-table-bar"}]],page:!0,height:"full"}),e.on("tool(admin-management-table)",function(e){(0,o.default)({pid:e.data,elem:this,table:s,type:"edit"})}),t.on("switch(admin-management-table-check)",function(e){(c={}).act=r.act.bcPurchase_updateStatus,c.id=this.value,c.status=e.elem.checked?1:0,(0,d.echo)().data(c).post()})})},i("body").on("click",".add-admin-btn",function(){(0,o.default)({elem:this,table:s,type:"add"})})}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i,n){Object.defineProperty(t,"__esModule",{value:!0});var l=a(0),o=a(2),r=a(0),d=void 0,s="";t.default=function(t){var a=t.id,c=t.pid,u=t.table,f=f={data:{status:1}};c&&(f.data=c),new e({el:".c"+a,delimiters:["${{","}}"],data:f}),layui.use(["form","upload"],function(){var e=layui.form;layui.upload.render({elem:".c"+a+" #index-banner-photo",auto:!1,choose:function(e){(0,o.echo)().data({act:l.act.upload_upload}).succ(function(e){if(e){var t=i(".c"+a+" #index-banner-photo-img").parents(".layui-upload").find("input")[0].files[0],l={next:function(e){},error:function(e){i.tips("上传过程出现错误，稍后再试",4)},complete:function(e){!1,layer.closeAll(),i(".c"+a+" #index-banner-photo-img").attr("src",""+r.imgADD.add+s+r.imgADD.bannerImg)}};s=(0,r.uuid)(),n.upload(t,s,e.uploadToken,r.putExtra,r.uploadConfig).subscribe(l),!0,i.tips(1)}else!1}).err(function(){return!1}).post()}}),e.render(),e.on("submit(index-banner-edit-form-submit)",function(e){var t=void 0,a=!1;d=e.field;var n=i(e.form).find("#index-banner-photo-img").attr("src");n&&(d.img=n);var r="edit"==i(e.form).attr("flag");return r?(d.act=l.act.bcBanner_update,t="修改"):(t="增加",d.act=l.act.bcBanner_add),(0,o.echo)().data(d).succ(function(n){n&&(a=!0,i.tips(t+"成功",3),r||(s="",i(e.form).find("#index-banner-photo-img").attr("src","")),u.reload())}).loading("上传中",2).async(),!r&&a})})}}).call(this,a(1),a(3),a(5))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),l=a(0);i(function(){var e=i("body");e.on("click",".cloned .add-options",function(){i(this).parents(".layui-form-item").before('  <div class="layui-form-item">\n                                <label class="layui-form-label">选项名称</label>\n                                <div class="layui-input-inline">\n                                    <input type="text" name="elem-name" lay-verify="title" autocomplete="off" placeholder="请输入名称" class="layui-input">\n\n                                </div>\n                            <button class="layui-btn layui-btn-danger  delete-options"><i class="layui-icon">&#xe640;</i> </button>\n                     </div>')}),e.on("click",".cloned .delete-options",function(){i(this).parents(".layui-form-item").remove()})}),t.default=function(t){var a=t.id,o=t.pid,r=t.table;new e({el:".c"+a,delimiters:["${{","}}"],data:o||{id:"",name:"",list:{name:""}}});var d={};layui.use(["form"],function(){layui.form.on("submit(option-template)",function(e){d=e.field;var t="edit"==i(e.form).attr("flag");d.act=t?l.act.bcTemplate_update:l.act.bcTemplate_add;var o=[];return i(e.form).find("input[name=elem-name]").each(function(e,t){o[e]=i(t).val()}),d.elementNames=o,(0,n.echo)().data(d).succ(function(e){e&&!t&&i(".c"+a+" input").val(""),r.reload()}).loading("加载中").post(),!1})})}}).call(this,a(1),a(3))},function(e,t,a){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),l=a(0);e(function(){e("body").on("click",".get-code",function(){var t=e("input[name=telephone]").val();if(e.stringIsBlank(t))layer.tips("电话号码不能为空","input[name=telephone]",{tips:3});else{var a=e(this);e.btnDisabled(a);var i=(new Date).getTime()+COUNTDOWN,n=(new Date).getTime();util.countdown(i,n,function(t){var i=t[3]+"秒后再次获取";a.html(i),0==t[3]&&(e.btnEnsabled(a),a.html("获取验证码"))})}})}),t.default=function(t){layui.use(["layer","util"],function(){layui.util});var a=e.tips("自动登陆中",2);layui.use("form",function(){var o=!1,r=layui.form;layer=layui.layer;var d=localStorage.getItem("token");if(l.requestUrl.token=d,!e.stringIsBlank(d)){var s={act:l.act.token_validate,token:d};(0,n.echo)().data(s).succ(function(a){a?(e("#username span").text(a.nickname),e("#username img").attr("src",a.image),e("#username").attr("userId",a.id),l.requestUrl.token=a.token,l.requestUrl.type=a.type,t&&e("#overview").click(),o=!0):(localStorage.removeItem("token"),o=!1)}).async()}if(layer.close(a),!o){var c=layer.open({title:"登陆",type:1,closeBtn:0,skin:"layui-layer-rim",shadeClose:!1,content:'  <div id="loginOrRegist" style="width: 360px;height: 180px">\n        <login v-bind:login-Or-Regist="loginOrRegist" v-bind:code-url="codeurl"></login>\n        </div>'});new i({el:"#loginOrRegist",data:{loginOrRegist:"login",codeurl:""}}),r.on("submit(login)",function(a){var i=a.field;return i.act=l.act.login_validate,(0,n.echo)(l.requestUrl.mainUrl).data(i).succ(function(a){a&&(layer.close(c),e("#username span").text(a.nickname),e("#username img").attr("src",a.image),e("#username").attr("userId",a.id),l.requestUrl.token=a.token,l.requestUrl.type=a.type,localStorage.setItem("token",a.token),t&&e("#overview").click())}).loading("登陆中",2).post(),!1})}})}}).call(this,a(3),a(1))},function(e,t,a){"use strict";var i,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=a(3),o=(i=l)&&i.__esModule?i:{default:i};(0,o.default)(function(){var e="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)};o.default.extend({stringIsBlank:function(e){return!e||/^\s*$/.test(e)},btnDisabled:function(e){var t=(0,o.default)(e);t.addClass("layui-btn-disabled"),t.attr("disabled","fales")},btnEnsabled:function(e){var t=(0,o.default)(e);t.removeClass("layui-btn-disabled"),t.removeAttr("disabled","fales")},showWithAnim:function(e,t,a,i){o.default.stringIsBlank(a)||(0,o.default)(a).addClass(t),(0,o.default)(e).removeClass(t),i&&(0,o.default)(e).addClass("layui-anim-loop")},tips:function(e,t){var a=void 0;if(void 0!=("undefined"==typeof layer?"undefined":n(layer))){switch(t){case 1:a=layer.load(1);break;case 2:a=layer.msg(e,{icon:16,shade:.01,time:0});break;case 3:a=layer.msg(e,{icon:1,anim:6});break;case 4:a=layer.msg(e,{icon:5,anim:6});break;default:a=layer.load(1)}return a}},crate_classification_options:function(e){var t=void 0,a=void 0,i="<option value='0'>直接选择或者搜索选择</option>";for(var n in e)for(var l in t=e[n].name,i+="<option value="+e[n].id+">"+t+"</option>",a=e[n].list)i+="<option value="+a[l].id+">"+t+"--"+a[l].name+"</option>";return i},cloneObj:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){var a=void 0,i=t.constructor===Array?[]:{};if("object"===(void 0===t?"undefined":e(t))){if(window.JSON)a=JSON.stringify(t),i=JSON.parse(a);else for(var n in t)i[n]="object"===e(t[n])?cloneObj(t[n]):t[n];return i}})})})},function(e,t,a){"use strict";(function(e){n(a(55)),n(a(45));var t=n(a(44)),i=n(a(4));n(a(13)),n(a(12)),n(a(11)),n(a(10)),n(a(9)),n(a(8)),n(a(7));function n(e){return e&&e.__esModule?e:{default:e}}e(function(){layui.use("element",function(){(0,t.default)(!0),layui.element.on("tabDelete",function(t){var a=e(this).parent().attr("lay-id");e(".site-active[tag-id="+a+"]").attr("flag","off"),e(".site-active-edit[tag-id="+a+"]").attr("flag","off")}),e("body").on("click",".site-active",function(){var t=e(this);(0,i.default)({elem:t})})})})}).call(this,a(3))},,,,,,,,,function(e,t){}],[[46,0,1]]]);
//# sourceMappingURL=entry.js.map